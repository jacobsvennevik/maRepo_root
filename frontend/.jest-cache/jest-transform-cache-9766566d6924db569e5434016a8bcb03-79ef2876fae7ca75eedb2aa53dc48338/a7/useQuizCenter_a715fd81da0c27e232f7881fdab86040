b941767ebd75174f8b3dc4e90450aa6d
/**
 * useQuizCenter Custom Hook
 * 
 * Comprehensive state management hook for Quiz Center,
 * following the established patterns from useFlashcardDashboard and useFileStorage.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useQuizCenter", {
    enumerable: true,
    get: function() {
        return useQuizCenter;
    }
});
const _react = require("react");
const _quizApi = require("../services/quizApi");
const _transformers = require("../utils/transformers");
function useQuizCenter({ projectId, autoLoad = true, refreshInterval }) {
    // State management
    const [state, setState] = (0, _react.useState)({
        sessions: [],
        currentSession: undefined,
        currentQuestions: undefined,
        analytics: undefined,
        // Loading states
        loading: true,
        loadingSessions: false,
        loadingSession: false,
        loadingQuestions: false,
        submittingAnswer: false,
        generatingQuiz: false,
        // Error states
        error: null,
        sessionError: null,
        questionsError: null,
        submissionError: null,
        // UI state
        selectedSessionId: undefined,
        currentQuestionIndex: 0,
        sessionStarted: false,
        sessionCompleted: false,
        // Stats
        totalSessions: 0,
        completedSessions: 0,
        averageScore: 0,
        totalTimeSpent: 0
    });
    // Refs for cleanup and tracking
    const isMountedRef = (0, _react.useRef)(true);
    const refreshIntervalRef = (0, _react.useRef)(null);
    // Cleanup on unmount
    (0, _react.useEffect)(()=>{
        return ()=>{
            isMountedRef.current = false;
            if (refreshIntervalRef.current) {
                clearInterval(refreshIntervalRef.current);
            }
        };
    }, []);
    // Auto-load data on mount
    (0, _react.useEffect)(()=>{
        if (autoLoad && projectId) {
            loadSessions();
        }
    }, [
        projectId,
        autoLoad,
        loadSessions
    ]);
    // Set up refresh interval
    (0, _react.useEffect)(()=>{
        if (refreshInterval && refreshInterval > 0) {
            refreshIntervalRef.current = setInterval(()=>{
                if (isMountedRef.current) {
                    refreshData();
                }
            }, refreshInterval);
        }
        return ()=>{
            if (refreshIntervalRef.current) {
                clearInterval(refreshIntervalRef.current);
            }
        };
    }, [
        refreshInterval
    ]);
    // Data loading functions
    const loadSessions = (0, _react.useCallback)(async ()=>{
        if (!projectId) return;
        try {
            setState((prev)=>({
                    ...prev,
                    loadingSessions: true,
                    error: null
                }));
            console.log(`ðŸ” Loading quiz sessions for project: ${projectId}`);
            const backendSessions = await _quizApi.quizApi.getProjectSessions(projectId);
            const sessions = (0, _transformers.transformSessions)(backendSessions);
            // Calculate project stats
            const stats = (0, _transformers.calculateProjectStats)(sessions);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        sessions,
                        loadingSessions: false,
                        loading: false,
                        totalSessions: stats.totalSessions,
                        completedSessions: stats.completedSessions,
                        averageScore: stats.averageScore,
                        totalTimeSpent: stats.totalTimeSpent
                    }));
            }
        } catch (error) {
            console.error('âŒ Failed to load sessions:', error);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        loadingSessions: false,
                        loading: false,
                        error: error instanceof Error ? error.message : 'Failed to load quiz sessions'
                    }));
            }
        }
    }, [
        projectId
    ]);
    const loadSession = (0, _react.useCallback)(async (sessionId)=>{
        try {
            setState((prev)=>({
                    ...prev,
                    loadingSession: true,
                    sessionError: null
                }));
            console.log(`ðŸ” Loading quiz session: ${sessionId}`);
            const backendSession = await _quizApi.quizApi.getSession(sessionId);
            const session = (0, _transformers.transformSessions)([
                backendSession
            ])[0];
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        currentSession: session,
                        loadingSession: false,
                        selectedSessionId: sessionId
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to load session ${sessionId}:`, error);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        loadingSession: false,
                        sessionError: error instanceof Error ? error.message : 'Failed to load quiz session'
                    }));
            }
        }
    }, []);
    const loadSessionQuestions = (0, _react.useCallback)(async (sessionId)=>{
        try {
            setState((prev)=>({
                    ...prev,
                    loadingQuestions: true,
                    questionsError: null
                }));
            console.log(`â“ Loading questions for session: ${sessionId}`);
            const backendQuestions = await _quizApi.quizApi.getSessionQuestions(sessionId);
            const questions = (0, _transformers.transformQuestions)(backendQuestions);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        currentQuestions: questions,
                        loadingQuestions: false,
                        currentQuestionIndex: 0
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to load questions for session ${sessionId}:`, error);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        loadingQuestions: false,
                        questionsError: error instanceof Error ? error.message : 'Failed to load quiz questions'
                    }));
            }
        }
    }, []);
    const loadSessionResponses = (0, _react.useCallback)(async (sessionId)=>{
        try {
            console.log(`ðŸ“Š Loading responses for session: ${sessionId}`);
            const backendResponses = await _quizApi.quizApi.getSessionResponses(sessionId);
            const responses = (0, _transformers.transformResponses)(backendResponses);
            // Update session stats with responses
            const session = state.sessions.find((s)=>s.id === sessionId);
            if (session) {
                const stats = (0, _transformers.calculateSessionStats)(session, responses);
                const updatedSession = {
                    ...session,
                    ...stats
                };
                if (isMountedRef.current) {
                    setState((prev)=>({
                            ...prev,
                            sessions: prev.sessions.map((s)=>s.id === sessionId ? updatedSession : s)
                        }));
                }
            }
        } catch (error) {
            console.error(`âŒ Failed to load responses for session ${sessionId}:`, error);
        }
    }, [
        state.sessions
    ]);
    const loadSessionAnalytics = (0, _react.useCallback)(async (sessionId)=>{
        try {
            console.log(`ðŸ“ˆ Loading analytics for session: ${sessionId}`);
            const backendAnalytics = await _quizApi.quizApi.getSessionAnalytics(sessionId);
            const analytics = (0, _transformers.transformAnalytics)(backendAnalytics);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        analytics
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to load analytics for session ${sessionId}:`, error);
        }
    }, []);
    const refreshData = (0, _react.useCallback)(async ()=>{
        await loadSessions();
    }, [
        loadSessions
    ]);
    // CRUD operations
    const createSession = (0, _react.useCallback)(async (request)=>{
        try {
            setState((prev)=>({
                    ...prev,
                    generatingQuiz: true,
                    error: null
                }));
            console.log('ðŸš€ Creating new quiz session:', request);
            const backendSession = await _quizApi.quizApi.createSession(request);
            const session = (0, _transformers.transformSessions)([
                backendSession
            ])[0];
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        sessions: [
                            session,
                            ...prev.sessions
                        ],
                        generatingQuiz: false,
                        totalSessions: prev.totalSessions + 1
                    }));
            }
            return session;
        } catch (error) {
            console.error('âŒ Failed to create session:', error);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        generatingQuiz: false,
                        error: error instanceof Error ? error.message : 'Failed to create quiz session'
                    }));
            }
            throw error;
        }
    }, []);
    const updateSession = (0, _react.useCallback)(async (sessionId, request)=>{
        try {
            console.log(`ðŸ“ Updating session ${sessionId}:`, request);
            const backendSession = await _quizApi.quizApi.updateSession(sessionId, request);
            const updatedSession = (0, _transformers.transformSessions)([
                backendSession
            ])[0];
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        sessions: prev.sessions.map((s)=>s.id === sessionId ? updatedSession : s),
                        currentSession: prev.currentSession?.id === sessionId ? updatedSession : prev.currentSession
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to update session ${sessionId}:`, error);
            throw error;
        }
    }, []);
    const deleteSession = (0, _react.useCallback)(async (sessionId)=>{
        try {
            console.log(`ðŸ—‘ï¸ Deleting session: ${sessionId}`);
            await _quizApi.quizApi.deleteSession(sessionId);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        sessions: prev.sessions.filter((s)=>s.id !== sessionId),
                        currentSession: prev.currentSession?.id === sessionId ? undefined : prev.currentSession,
                        selectedSessionId: prev.selectedSessionId === sessionId ? undefined : prev.selectedSessionId,
                        totalSessions: prev.totalSessions - 1
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to delete session ${sessionId}:`, error);
            throw error;
        }
    }, []);
    const bulkDeleteSessions = (0, _react.useCallback)(async (sessionIds)=>{
        try {
            console.log(`ðŸ—‘ï¸ Bulk deleting ${sessionIds.length} sessions`);
            await _quizApi.quizApi.bulkDeleteSessions(sessionIds);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        sessions: prev.sessions.filter((s)=>!sessionIds.includes(s.id)),
                        totalSessions: prev.totalSessions - sessionIds.length
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to bulk delete sessions:`, error);
            throw error;
        }
    }, []);
    const bulkUpdateSessions = (0, _react.useCallback)(async (sessionIds, updates)=>{
        try {
            console.log(`ðŸ“ Bulk updating ${sessionIds.length} sessions`);
            await _quizApi.quizApi.bulkUpdateSessions(sessionIds, updates);
            // Refresh data to get updated sessions
            await refreshData();
        } catch (error) {
            console.error(`âŒ Failed to bulk update sessions:`, error);
            throw error;
        }
    }, [
        refreshData
    ]);
    // Quiz session operations
    const startSession = (0, _react.useCallback)(async (sessionId)=>{
        try {
            console.log(`â–¶ï¸ Starting session: ${sessionId}`);
            const response = await _quizApi.quizApi.startSession(sessionId);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        currentQuestions: response.questions,
                        sessionStarted: true,
                        sessionCompleted: false,
                        currentQuestionIndex: 0
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to start session ${sessionId}:`, error);
            throw error;
        }
    }, []);
    const submitAnswer = (0, _react.useCallback)(async (request)=>{
        if (!state.currentSession) return;
        try {
            setState((prev)=>({
                    ...prev,
                    submittingAnswer: true,
                    submissionError: null
                }));
            console.log(`ðŸ“ Submitting answer for question ${request.question_id}`);
            const response = await _quizApi.quizApi.submitAnswer(state.currentSession.id, request);
            // Update current question with answer
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        currentQuestions: prev.currentQuestions?.map((q)=>q.id === request.question_id ? {
                                ...q,
                                userAnswer: request.user_answer,
                                isCorrect: response.is_correct,
                                isAnswered: true
                            } : q),
                        submittingAnswer: false
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to submit answer:`, error);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        submittingAnswer: false,
                        submissionError: error instanceof Error ? error.message : 'Failed to submit answer'
                    }));
            }
            throw error;
        }
    }, [
        state.currentSession
    ]);
    const completeSession = (0, _react.useCallback)(async ()=>{
        if (!state.currentSession) return;
        try {
            console.log(`âœ… Completing session: ${state.currentSession.id}`);
            // Update session status to completed
            await updateSession(state.currentSession.id, {
                status: 'completed'
            });
            // Load analytics
            await loadSessionAnalytics(state.currentSession.id);
            if (isMountedRef.current) {
                setState((prev)=>({
                        ...prev,
                        sessionCompleted: true,
                        sessionStarted: false
                    }));
            }
        } catch (error) {
            console.error(`âŒ Failed to complete session:`, error);
            throw error;
        }
    }, [
        state.currentSession,
        updateSession,
        loadSessionAnalytics
    ]);
    // UI operations
    const selectSession = (0, _react.useCallback)((sessionId)=>{
        setState((prev)=>({
                ...prev,
                selectedSessionId: sessionId,
                currentSession: prev.sessions.find((s)=>s.id === sessionId)
            }));
    }, []);
    const nextQuestion = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                currentQuestionIndex: Math.min(prev.currentQuestionIndex + 1, (prev.currentQuestions?.length || 1) - 1)
            }));
    }, []);
    const previousQuestion = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                currentQuestionIndex: Math.max(prev.currentQuestionIndex - 1, 0)
            }));
    }, []);
    const goToQuestion = (0, _react.useCallback)((index)=>{
        setState((prev)=>({
                ...prev,
                currentQuestionIndex: Math.max(0, Math.min(index, (prev.currentQuestions?.length || 1) - 1))
            }));
    }, []);
    // Filtering and sorting
    const filterSessions = (0, _react.useCallback)((filters)=>{
        // Implementation would filter sessions based on criteria
        console.log('ðŸ” Filtering sessions:', filters);
    }, []);
    const sortSessions = (0, _react.useCallback)((sort)=>{
        // Implementation would sort sessions based on criteria
        console.log('ðŸ“Š Sorting sessions:', sort);
    }, []);
    // Error handling
    const clearError = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                error: null
            }));
    }, []);
    const clearSessionError = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                sessionError: null
            }));
    }, []);
    const clearQuestionsError = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                questionsError: null
            }));
    }, []);
    const clearSubmissionError = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                submissionError: null
            }));
    }, []);
    // Utility functions
    const getCurrentQuestion = (0, _react.useCallback)(()=>{
        return state.currentQuestions?.[state.currentQuestionIndex];
    }, [
        state.currentQuestions,
        state.currentQuestionIndex
    ]);
    const getSessionById = (0, _react.useCallback)((sessionId)=>{
        return state.sessions.find((s)=>s.id === sessionId);
    }, [
        state.sessions
    ]);
    const isSessionCompleted = (0, _react.useCallback)((sessionId)=>{
        const session = getSessionById(sessionId);
        return session?.status === 'completed';
    }, [
        getSessionById
    ]);
    const getSessionProgress = (0, _react.useCallback)((sessionId)=>{
        const session = getSessionById(sessionId);
        return session?.completionRate || 0;
    }, [
        getSessionById
    ]);
    return {
        ...state,
        // Data operations
        loadSessions,
        loadSession,
        loadSessionQuestions,
        loadSessionResponses,
        loadSessionAnalytics,
        refreshData,
        // CRUD operations
        createSession,
        updateSession,
        deleteSession,
        bulkDeleteSessions,
        bulkUpdateSessions,
        // Quiz session operations
        startSession,
        submitAnswer,
        completeSession,
        // UI operations
        selectSession,
        nextQuestion,
        previousQuestion,
        goToQuestion,
        // Filtering and sorting
        filterSessions,
        sortSessions,
        // Error handling
        clearError,
        clearSessionError,
        clearQuestionsError,
        clearSubmissionError,
        // Utility functions
        getCurrentQuestion,
        getSessionById,
        isSessionCompleted,
        getSessionProgress
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYWNvYmhvcm5zdmVubmV2aWsvRG9jdW1lbnRzL0dpdEh1Yi9tYVJlcG9fcm9vdC9mcm9udGVuZC9zcmMvZmVhdHVyZXMvcXVpei9ob29rcy91c2VRdWl6Q2VudGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogdXNlUXVpekNlbnRlciBDdXN0b20gSG9va1xuICogXG4gKiBDb21wcmVoZW5zaXZlIHN0YXRlIG1hbmFnZW1lbnQgaG9vayBmb3IgUXVpeiBDZW50ZXIsXG4gKiBmb2xsb3dpbmcgdGhlIGVzdGFibGlzaGVkIHBhdHRlcm5zIGZyb20gdXNlRmxhc2hjYXJkRGFzaGJvYXJkIGFuZCB1c2VGaWxlU3RvcmFnZS5cbiAqL1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcXVpekFwaSB9IGZyb20gJy4uL3NlcnZpY2VzL3F1aXpBcGknO1xuaW1wb3J0IHtcbiAgdHJhbnNmb3JtU2Vzc2lvbnMsXG4gIHRyYW5zZm9ybVF1ZXN0aW9ucyxcbiAgdHJhbnNmb3JtUmVzcG9uc2VzLFxuICB0cmFuc2Zvcm1BbmFseXRpY3MsXG4gIGNhbGN1bGF0ZVNlc3Npb25TdGF0cyxcbiAgY2FsY3VsYXRlUHJvamVjdFN0YXRzLFxuICB2YWxpZGF0ZVNlc3Npb25cbn0gZnJvbSAnLi4vdXRpbHMvdHJhbnNmb3JtZXJzJztcbmltcG9ydCB0eXBlIHtcbiAgUXVpekNlbnRlclN0YXRlLFxuICBRdWl6U2Vzc2lvbixcbiAgUXVpelF1ZXN0aW9uLFxuICBRdWl6UmVzcG9uc2UsXG4gIFF1aXpBbmFseXRpY3MsXG4gIENyZWF0ZVF1aXpTZXNzaW9uUmVxdWVzdCxcbiAgVXBkYXRlUXVpelNlc3Npb25SZXF1ZXN0LFxuICBTdWJtaXRRdWl6QW5zd2VyUmVxdWVzdCxcbiAgUXVpelNlc3Npb25GaWx0ZXJzLFxuICBRdWl6U2Vzc2lvblNvcnQsXG4gIFF1aXpFcnJvclxufSBmcm9tICcuLi90eXBlcyc7XG5cbmludGVyZmFjZSBVc2VRdWl6Q2VudGVyT3B0aW9ucyB7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICBhdXRvTG9hZD86IGJvb2xlYW47XG4gIHJlZnJlc2hJbnRlcnZhbD86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFVzZVF1aXpDZW50ZXJSZXR1cm4gZXh0ZW5kcyBRdWl6Q2VudGVyU3RhdGUge1xuICAvLyBEYXRhIG9wZXJhdGlvbnNcbiAgbG9hZFNlc3Npb25zOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkU2Vzc2lvbjogKHNlc3Npb25JZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkU2Vzc2lvblF1ZXN0aW9uczogKHNlc3Npb25JZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkU2Vzc2lvblJlc3BvbnNlczogKHNlc3Npb25JZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkU2Vzc2lvbkFuYWx5dGljczogKHNlc3Npb25JZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZWZyZXNoRGF0YTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG4gIC8vIENSVUQgb3BlcmF0aW9uc1xuICBjcmVhdGVTZXNzaW9uOiAocmVxdWVzdDogQ3JlYXRlUXVpelNlc3Npb25SZXF1ZXN0KSA9PiBQcm9taXNlPFF1aXpTZXNzaW9uPjtcbiAgdXBkYXRlU2Vzc2lvbjogKHNlc3Npb25JZDogc3RyaW5nLCByZXF1ZXN0OiBVcGRhdGVRdWl6U2Vzc2lvblJlcXVlc3QpID0+IFByb21pc2U8dm9pZD47XG4gIGRlbGV0ZVNlc3Npb246IChzZXNzaW9uSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgYnVsa0RlbGV0ZVNlc3Npb25zOiAoc2Vzc2lvbklkczogc3RyaW5nW10pID0+IFByb21pc2U8dm9pZD47XG4gIGJ1bGtVcGRhdGVTZXNzaW9uczogKHNlc3Npb25JZHM6IHN0cmluZ1tdLCB1cGRhdGVzOiBVcGRhdGVRdWl6U2Vzc2lvblJlcXVlc3QpID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBRdWl6IHNlc3Npb24gb3BlcmF0aW9uc1xuICBzdGFydFNlc3Npb246IChzZXNzaW9uSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc3VibWl0QW5zd2VyOiAocmVxdWVzdDogU3VibWl0UXVpekFuc3dlclJlcXVlc3QpID0+IFByb21pc2U8dm9pZD47XG4gIGNvbXBsZXRlU2Vzc2lvbjogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG4gIC8vIFVJIG9wZXJhdGlvbnNcbiAgc2VsZWN0U2Vzc2lvbjogKHNlc3Npb25JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBuZXh0UXVlc3Rpb246ICgpID0+IHZvaWQ7XG4gIHByZXZpb3VzUXVlc3Rpb246ICgpID0+IHZvaWQ7XG4gIGdvVG9RdWVzdGlvbjogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gIFxuICAvLyBGaWx0ZXJpbmcgYW5kIHNvcnRpbmdcbiAgZmlsdGVyU2Vzc2lvbnM6IChmaWx0ZXJzOiBRdWl6U2Vzc2lvbkZpbHRlcnMpID0+IHZvaWQ7XG4gIHNvcnRTZXNzaW9uczogKHNvcnQ6IFF1aXpTZXNzaW9uU29ydCkgPT4gdm9pZDtcbiAgXG4gIC8vIEVycm9yIGhhbmRsaW5nXG4gIGNsZWFyRXJyb3I6ICgpID0+IHZvaWQ7XG4gIGNsZWFyU2Vzc2lvbkVycm9yOiAoKSA9PiB2b2lkO1xuICBjbGVhclF1ZXN0aW9uc0Vycm9yOiAoKSA9PiB2b2lkO1xuICBjbGVhclN1Ym1pc3Npb25FcnJvcjogKCkgPT4gdm9pZDtcbiAgXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25zXG4gIGdldEN1cnJlbnRRdWVzdGlvbjogKCkgPT4gUXVpelF1ZXN0aW9uIHwgdW5kZWZpbmVkO1xuICBnZXRTZXNzaW9uQnlJZDogKHNlc3Npb25JZDogc3RyaW5nKSA9PiBRdWl6U2Vzc2lvbiB8IHVuZGVmaW5lZDtcbiAgaXNTZXNzaW9uQ29tcGxldGVkOiAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gIGdldFNlc3Npb25Qcm9ncmVzczogKHNlc3Npb25JZDogc3RyaW5nKSA9PiBudW1iZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWl6Q2VudGVyKHsgXG4gIHByb2plY3RJZCwgXG4gIGF1dG9Mb2FkID0gdHJ1ZSwgXG4gIHJlZnJlc2hJbnRlcnZhbCBcbn06IFVzZVF1aXpDZW50ZXJPcHRpb25zKTogVXNlUXVpekNlbnRlclJldHVybiB7XG4gIFxuICAvLyBTdGF0ZSBtYW5hZ2VtZW50XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8UXVpekNlbnRlclN0YXRlPih7XG4gICAgc2Vzc2lvbnM6IFtdLFxuICAgIGN1cnJlbnRTZXNzaW9uOiB1bmRlZmluZWQsXG4gICAgY3VycmVudFF1ZXN0aW9uczogdW5kZWZpbmVkLFxuICAgIGFuYWx5dGljczogdW5kZWZpbmVkLFxuICAgIFxuICAgIC8vIExvYWRpbmcgc3RhdGVzXG4gICAgbG9hZGluZzogdHJ1ZSxcbiAgICBsb2FkaW5nU2Vzc2lvbnM6IGZhbHNlLFxuICAgIGxvYWRpbmdTZXNzaW9uOiBmYWxzZSxcbiAgICBsb2FkaW5nUXVlc3Rpb25zOiBmYWxzZSxcbiAgICBzdWJtaXR0aW5nQW5zd2VyOiBmYWxzZSxcbiAgICBnZW5lcmF0aW5nUXVpejogZmFsc2UsXG4gICAgXG4gICAgLy8gRXJyb3Igc3RhdGVzXG4gICAgZXJyb3I6IG51bGwsXG4gICAgc2Vzc2lvbkVycm9yOiBudWxsLFxuICAgIHF1ZXN0aW9uc0Vycm9yOiBudWxsLFxuICAgIHN1Ym1pc3Npb25FcnJvcjogbnVsbCxcbiAgICBcbiAgICAvLyBVSSBzdGF0ZVxuICAgIHNlbGVjdGVkU2Vzc2lvbklkOiB1bmRlZmluZWQsXG4gICAgY3VycmVudFF1ZXN0aW9uSW5kZXg6IDAsXG4gICAgc2Vzc2lvblN0YXJ0ZWQ6IGZhbHNlLFxuICAgIHNlc3Npb25Db21wbGV0ZWQ6IGZhbHNlLFxuICAgIFxuICAgIC8vIFN0YXRzXG4gICAgdG90YWxTZXNzaW9uczogMCxcbiAgICBjb21wbGV0ZWRTZXNzaW9uczogMCxcbiAgICBhdmVyYWdlU2NvcmU6IDAsXG4gICAgdG90YWxUaW1lU3BlbnQ6IDBcbiAgfSk7XG5cbiAgLy8gUmVmcyBmb3IgY2xlYW51cCBhbmQgdHJhY2tpbmdcbiAgY29uc3QgaXNNb3VudGVkUmVmID0gdXNlUmVmKHRydWUpO1xuICBjb25zdCByZWZyZXNoSW50ZXJ2YWxSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNNb3VudGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIGlmIChyZWZyZXNoSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHJlZnJlc2hJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gQXV0by1sb2FkIGRhdGEgb24gbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYXV0b0xvYWQgJiYgcHJvamVjdElkKSB7XG4gICAgICBsb2FkU2Vzc2lvbnMoKTtcbiAgICB9XG4gIH0sIFtwcm9qZWN0SWQsIGF1dG9Mb2FkLCBsb2FkU2Vzc2lvbnNdKTtcblxuICAvLyBTZXQgdXAgcmVmcmVzaCBpbnRlcnZhbFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWZyZXNoSW50ZXJ2YWwgJiYgcmVmcmVzaEludGVydmFsID4gMCkge1xuICAgICAgcmVmcmVzaEludGVydmFsUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJlZnJlc2hEYXRhKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlZnJlc2hJbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChyZWZyZXNoSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHJlZnJlc2hJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbcmVmcmVzaEludGVydmFsXSk7XG5cbiAgLy8gRGF0YSBsb2FkaW5nIGZ1bmN0aW9uc1xuICBjb25zdCBsb2FkU2Vzc2lvbnMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFwcm9qZWN0SWQpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmdTZXNzaW9uczogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBMb2FkaW5nIHF1aXogc2Vzc2lvbnMgZm9yIHByb2plY3Q6ICR7cHJvamVjdElkfWApO1xuICAgICAgY29uc3QgYmFja2VuZFNlc3Npb25zID0gYXdhaXQgcXVpekFwaS5nZXRQcm9qZWN0U2Vzc2lvbnMocHJvamVjdElkKTtcbiAgICAgIGNvbnN0IHNlc3Npb25zID0gdHJhbnNmb3JtU2Vzc2lvbnMoYmFja2VuZFNlc3Npb25zKTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHByb2plY3Qgc3RhdHNcbiAgICAgIGNvbnN0IHN0YXRzID0gY2FsY3VsYXRlUHJvamVjdFN0YXRzKHNlc3Npb25zKTtcbiAgICAgIFxuICAgICAgaWYgKGlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHNlc3Npb25zLFxuICAgICAgICAgIGxvYWRpbmdTZXNzaW9uczogZmFsc2UsXG4gICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgdG90YWxTZXNzaW9uczogc3RhdHMudG90YWxTZXNzaW9ucyxcbiAgICAgICAgICBjb21wbGV0ZWRTZXNzaW9uczogc3RhdHMuY29tcGxldGVkU2Vzc2lvbnMsXG4gICAgICAgICAgYXZlcmFnZVNjb3JlOiBzdGF0cy5hdmVyYWdlU2NvcmUsXG4gICAgICAgICAgdG90YWxUaW1lU3BlbnQ6IHN0YXRzLnRvdGFsVGltZVNwZW50XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBsb2FkIHNlc3Npb25zOicsIGVycm9yKTtcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBsb2FkaW5nU2Vzc2lvbnM6IGZhbHNlLFxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBxdWl6IHNlc3Npb25zJ1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbcHJvamVjdElkXSk7XG5cbiAgY29uc3QgbG9hZFNlc3Npb24gPSB1c2VDYWxsYmFjayhhc3luYyAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nU2Vzc2lvbjogdHJ1ZSwgc2Vzc2lvbkVycm9yOiBudWxsIH0pKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYPCflI0gTG9hZGluZyBxdWl6IHNlc3Npb246ICR7c2Vzc2lvbklkfWApO1xuICAgICAgY29uc3QgYmFja2VuZFNlc3Npb24gPSBhd2FpdCBxdWl6QXBpLmdldFNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIGNvbnN0IHNlc3Npb24gPSB0cmFuc2Zvcm1TZXNzaW9ucyhbYmFja2VuZFNlc3Npb25dKVswXTtcbiAgICAgIFxuICAgICAgaWYgKGlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIGN1cnJlbnRTZXNzaW9uOiBzZXNzaW9uLFxuICAgICAgICAgIGxvYWRpbmdTZXNzaW9uOiBmYWxzZSxcbiAgICAgICAgICBzZWxlY3RlZFNlc3Npb25JZDogc2Vzc2lvbklkXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byBsb2FkIHNlc3Npb24gJHtzZXNzaW9uSWR9OmAsIGVycm9yKTtcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBsb2FkaW5nU2Vzc2lvbjogZmFsc2UsXG4gICAgICAgICAgc2Vzc2lvbkVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBxdWl6IHNlc3Npb24nXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBsb2FkU2Vzc2lvblF1ZXN0aW9ucyA9IHVzZUNhbGxiYWNrKGFzeW5jIChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmdRdWVzdGlvbnM6IHRydWUsIHF1ZXN0aW9uc0Vycm9yOiBudWxsIH0pKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYOKdkyBMb2FkaW5nIHF1ZXN0aW9ucyBmb3Igc2Vzc2lvbjogJHtzZXNzaW9uSWR9YCk7XG4gICAgICBjb25zdCBiYWNrZW5kUXVlc3Rpb25zID0gYXdhaXQgcXVpekFwaS5nZXRTZXNzaW9uUXVlc3Rpb25zKHNlc3Npb25JZCk7XG4gICAgICBjb25zdCBxdWVzdGlvbnMgPSB0cmFuc2Zvcm1RdWVzdGlvbnMoYmFja2VuZFF1ZXN0aW9ucyk7XG4gICAgICBcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBjdXJyZW50UXVlc3Rpb25zOiBxdWVzdGlvbnMsXG4gICAgICAgICAgbG9hZGluZ1F1ZXN0aW9uczogZmFsc2UsXG4gICAgICAgICAgY3VycmVudFF1ZXN0aW9uSW5kZXg6IDBcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGxvYWQgcXVlc3Rpb25zIGZvciBzZXNzaW9uICR7c2Vzc2lvbklkfTpgLCBlcnJvcik7XG4gICAgICBpZiAoaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgbG9hZGluZ1F1ZXN0aW9uczogZmFsc2UsXG4gICAgICAgICAgcXVlc3Rpb25zRXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsb2FkIHF1aXogcXVlc3Rpb25zJ1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgbG9hZFNlc3Npb25SZXNwb25zZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYPCfk4ogTG9hZGluZyByZXNwb25zZXMgZm9yIHNlc3Npb246ICR7c2Vzc2lvbklkfWApO1xuICAgICAgY29uc3QgYmFja2VuZFJlc3BvbnNlcyA9IGF3YWl0IHF1aXpBcGkuZ2V0U2Vzc2lvblJlc3BvbnNlcyhzZXNzaW9uSWQpO1xuICAgICAgY29uc3QgcmVzcG9uc2VzID0gdHJhbnNmb3JtUmVzcG9uc2VzKGJhY2tlbmRSZXNwb25zZXMpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc2Vzc2lvbiBzdGF0cyB3aXRoIHJlc3BvbnNlc1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IHN0YXRlLnNlc3Npb25zLmZpbmQocyA9PiBzLmlkID09PSBzZXNzaW9uSWQpO1xuICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBjYWxjdWxhdGVTZXNzaW9uU3RhdHMoc2Vzc2lvbiwgcmVzcG9uc2VzKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZFNlc3Npb24gPSB7IC4uLnNlc3Npb24sIC4uLnN0YXRzIH07XG4gICAgICAgIFxuICAgICAgICBpZiAoaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgc2Vzc2lvbnM6IHByZXYuc2Vzc2lvbnMubWFwKHMgPT4gcy5pZCA9PT0gc2Vzc2lvbklkID8gdXBkYXRlZFNlc3Npb24gOiBzKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGxvYWQgcmVzcG9uc2VzIGZvciBzZXNzaW9uICR7c2Vzc2lvbklkfTpgLCBlcnJvcik7XG4gICAgfVxuICB9LCBbc3RhdGUuc2Vzc2lvbnNdKTtcblxuICBjb25zdCBsb2FkU2Vzc2lvbkFuYWx5dGljcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TiCBMb2FkaW5nIGFuYWx5dGljcyBmb3Igc2Vzc2lvbjogJHtzZXNzaW9uSWR9YCk7XG4gICAgICBjb25zdCBiYWNrZW5kQW5hbHl0aWNzID0gYXdhaXQgcXVpekFwaS5nZXRTZXNzaW9uQW5hbHl0aWNzKHNlc3Npb25JZCk7XG4gICAgICBjb25zdCBhbmFseXRpY3MgPSB0cmFuc2Zvcm1BbmFseXRpY3MoYmFja2VuZEFuYWx5dGljcyk7XG4gICAgICBcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBhbmFseXRpY3NcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGxvYWQgYW5hbHl0aWNzIGZvciBzZXNzaW9uICR7c2Vzc2lvbklkfTpgLCBlcnJvcik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVmcmVzaERhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbG9hZFNlc3Npb25zKCk7XG4gIH0sIFtsb2FkU2Vzc2lvbnNdKTtcblxuICAvLyBDUlVEIG9wZXJhdGlvbnNcbiAgY29uc3QgY3JlYXRlU2Vzc2lvbiA9IHVzZUNhbGxiYWNrKGFzeW5jIChyZXF1ZXN0OiBDcmVhdGVRdWl6U2Vzc2lvblJlcXVlc3QpOiBQcm9taXNlPFF1aXpTZXNzaW9uPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZ2VuZXJhdGluZ1F1aXo6IHRydWUsIGVycm9yOiBudWxsIH0pKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CfmoAgQ3JlYXRpbmcgbmV3IHF1aXogc2Vzc2lvbjonLCByZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGJhY2tlbmRTZXNzaW9uID0gYXdhaXQgcXVpekFwaS5jcmVhdGVTZXNzaW9uKHJlcXVlc3QpO1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRyYW5zZm9ybVNlc3Npb25zKFtiYWNrZW5kU2Vzc2lvbl0pWzBdO1xuICAgICAgXG4gICAgICBpZiAoaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgc2Vzc2lvbnM6IFtzZXNzaW9uLCAuLi5wcmV2LnNlc3Npb25zXSxcbiAgICAgICAgICBnZW5lcmF0aW5nUXVpejogZmFsc2UsXG4gICAgICAgICAgdG90YWxTZXNzaW9uczogcHJldi50b3RhbFNlc3Npb25zICsgMVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uOicsIGVycm9yKTtcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBnZW5lcmF0aW5nUXVpejogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjcmVhdGUgcXVpeiBzZXNzaW9uJ1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCB1cGRhdGVTZXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNlc3Npb25JZDogc3RyaW5nLCByZXF1ZXN0OiBVcGRhdGVRdWl6U2Vzc2lvblJlcXVlc3QpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYPCfk50gVXBkYXRpbmcgc2Vzc2lvbiAke3Nlc3Npb25JZH06YCwgcmVxdWVzdCk7XG4gICAgICBjb25zdCBiYWNrZW5kU2Vzc2lvbiA9IGF3YWl0IHF1aXpBcGkudXBkYXRlU2Vzc2lvbihzZXNzaW9uSWQsIHJlcXVlc3QpO1xuICAgICAgY29uc3QgdXBkYXRlZFNlc3Npb24gPSB0cmFuc2Zvcm1TZXNzaW9ucyhbYmFja2VuZFNlc3Npb25dKVswXTtcbiAgICAgIFxuICAgICAgaWYgKGlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHNlc3Npb25zOiBwcmV2LnNlc3Npb25zLm1hcChzID0+IHMuaWQgPT09IHNlc3Npb25JZCA/IHVwZGF0ZWRTZXNzaW9uIDogcyksXG4gICAgICAgICAgY3VycmVudFNlc3Npb246IHByZXYuY3VycmVudFNlc3Npb24/LmlkID09PSBzZXNzaW9uSWQgPyB1cGRhdGVkU2Vzc2lvbiA6IHByZXYuY3VycmVudFNlc3Npb25cbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHVwZGF0ZSBzZXNzaW9uICR7c2Vzc2lvbklkfTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBkZWxldGVTZXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIERlbGV0aW5nIHNlc3Npb246ICR7c2Vzc2lvbklkfWApO1xuICAgICAgYXdhaXQgcXVpekFwaS5kZWxldGVTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgICBcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBzZXNzaW9uczogcHJldi5zZXNzaW9ucy5maWx0ZXIocyA9PiBzLmlkICE9PSBzZXNzaW9uSWQpLFxuICAgICAgICAgIGN1cnJlbnRTZXNzaW9uOiBwcmV2LmN1cnJlbnRTZXNzaW9uPy5pZCA9PT0gc2Vzc2lvbklkID8gdW5kZWZpbmVkIDogcHJldi5jdXJyZW50U2Vzc2lvbixcbiAgICAgICAgICBzZWxlY3RlZFNlc3Npb25JZDogcHJldi5zZWxlY3RlZFNlc3Npb25JZCA9PT0gc2Vzc2lvbklkID8gdW5kZWZpbmVkIDogcHJldi5zZWxlY3RlZFNlc3Npb25JZCxcbiAgICAgICAgICB0b3RhbFNlc3Npb25zOiBwcmV2LnRvdGFsU2Vzc2lvbnMgLSAxXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byBkZWxldGUgc2Vzc2lvbiAke3Nlc3Npb25JZH06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgYnVsa0RlbGV0ZVNlc3Npb25zID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNlc3Npb25JZHM6IHN0cmluZ1tdKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIEJ1bGsgZGVsZXRpbmcgJHtzZXNzaW9uSWRzLmxlbmd0aH0gc2Vzc2lvbnNgKTtcbiAgICAgIGF3YWl0IHF1aXpBcGkuYnVsa0RlbGV0ZVNlc3Npb25zKHNlc3Npb25JZHMpO1xuICAgICAgXG4gICAgICBpZiAoaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgc2Vzc2lvbnM6IHByZXYuc2Vzc2lvbnMuZmlsdGVyKHMgPT4gIXNlc3Npb25JZHMuaW5jbHVkZXMocy5pZCkpLFxuICAgICAgICAgIHRvdGFsU2Vzc2lvbnM6IHByZXYudG90YWxTZXNzaW9ucyAtIHNlc3Npb25JZHMubGVuZ3RoXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byBidWxrIGRlbGV0ZSBzZXNzaW9uczpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBidWxrVXBkYXRlU2Vzc2lvbnMgPSB1c2VDYWxsYmFjayhhc3luYyAoc2Vzc2lvbklkczogc3RyaW5nW10sIHVwZGF0ZXM6IFVwZGF0ZVF1aXpTZXNzaW9uUmVxdWVzdCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TnSBCdWxrIHVwZGF0aW5nICR7c2Vzc2lvbklkcy5sZW5ndGh9IHNlc3Npb25zYCk7XG4gICAgICBhd2FpdCBxdWl6QXBpLmJ1bGtVcGRhdGVTZXNzaW9ucyhzZXNzaW9uSWRzLCB1cGRhdGVzKTtcbiAgICAgIFxuICAgICAgLy8gUmVmcmVzaCBkYXRhIHRvIGdldCB1cGRhdGVkIHNlc3Npb25zXG4gICAgICBhd2FpdCByZWZyZXNoRGF0YSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGJ1bGsgdXBkYXRlIHNlc3Npb25zOmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSwgW3JlZnJlc2hEYXRhXSk7XG5cbiAgLy8gUXVpeiBzZXNzaW9uIG9wZXJhdGlvbnNcbiAgY29uc3Qgc3RhcnRTZXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDilrbvuI8gU3RhcnRpbmcgc2Vzc2lvbjogJHtzZXNzaW9uSWR9YCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHF1aXpBcGkuc3RhcnRTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgICBcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBjdXJyZW50UXVlc3Rpb25zOiByZXNwb25zZS5xdWVzdGlvbnMsXG4gICAgICAgICAgc2Vzc2lvblN0YXJ0ZWQ6IHRydWUsXG4gICAgICAgICAgc2Vzc2lvbkNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgY3VycmVudFF1ZXN0aW9uSW5kZXg6IDBcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHN0YXJ0IHNlc3Npb24gJHtzZXNzaW9uSWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IHN1Ym1pdEFuc3dlciA9IHVzZUNhbGxiYWNrKGFzeW5jIChyZXF1ZXN0OiBTdWJtaXRRdWl6QW5zd2VyUmVxdWVzdCkgPT4ge1xuICAgIGlmICghc3RhdGUuY3VycmVudFNlc3Npb24pIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHN1Ym1pdHRpbmdBbnN3ZXI6IHRydWUsIHN1Ym1pc3Npb25FcnJvcjogbnVsbCB9KSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OdIFN1Ym1pdHRpbmcgYW5zd2VyIGZvciBxdWVzdGlvbiAke3JlcXVlc3QucXVlc3Rpb25faWR9YCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHF1aXpBcGkuc3VibWl0QW5zd2VyKHN0YXRlLmN1cnJlbnRTZXNzaW9uLmlkLCByZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgcXVlc3Rpb24gd2l0aCBhbnN3ZXJcbiAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBjdXJyZW50UXVlc3Rpb25zOiBwcmV2LmN1cnJlbnRRdWVzdGlvbnM/Lm1hcChxID0+IFxuICAgICAgICAgICAgcS5pZCA9PT0gcmVxdWVzdC5xdWVzdGlvbl9pZCBcbiAgICAgICAgICAgICAgPyB7IC4uLnEsIHVzZXJBbnN3ZXI6IHJlcXVlc3QudXNlcl9hbnN3ZXIsIGlzQ29ycmVjdDogcmVzcG9uc2UuaXNfY29ycmVjdCwgaXNBbnN3ZXJlZDogdHJ1ZSB9XG4gICAgICAgICAgICAgIDogcVxuICAgICAgICAgICksXG4gICAgICAgICAgc3VibWl0dGluZ0Fuc3dlcjogZmFsc2VcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHN1Ym1pdCBhbnN3ZXI6YCwgZXJyb3IpO1xuICAgICAgaWYgKGlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHN1Ym1pdHRpbmdBbnN3ZXI6IGZhbHNlLFxuICAgICAgICAgIHN1Ym1pc3Npb25FcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHN1Ym1pdCBhbnN3ZXInXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSwgW3N0YXRlLmN1cnJlbnRTZXNzaW9uXSk7XG5cbiAgY29uc3QgY29tcGxldGVTZXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghc3RhdGUuY3VycmVudFNlc3Npb24pIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIENvbXBsZXRpbmcgc2Vzc2lvbjogJHtzdGF0ZS5jdXJyZW50U2Vzc2lvbi5pZH1gKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHNlc3Npb24gc3RhdHVzIHRvIGNvbXBsZXRlZFxuICAgICAgYXdhaXQgdXBkYXRlU2Vzc2lvbihzdGF0ZS5jdXJyZW50U2Vzc2lvbi5pZCwgeyBzdGF0dXM6ICdjb21wbGV0ZWQnIH0pO1xuICAgICAgXG4gICAgICAvLyBMb2FkIGFuYWx5dGljc1xuICAgICAgYXdhaXQgbG9hZFNlc3Npb25BbmFseXRpY3Moc3RhdGUuY3VycmVudFNlc3Npb24uaWQpO1xuICAgICAgXG4gICAgICBpZiAoaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgc2Vzc2lvbkNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICBzZXNzaW9uU3RhcnRlZDogZmFsc2VcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGNvbXBsZXRlIHNlc3Npb246YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LCBbc3RhdGUuY3VycmVudFNlc3Npb24sIHVwZGF0ZVNlc3Npb24sIGxvYWRTZXNzaW9uQW5hbHl0aWNzXSk7XG5cbiAgLy8gVUkgb3BlcmF0aW9uc1xuICBjb25zdCBzZWxlY3RTZXNzaW9uID0gdXNlQ2FsbGJhY2soKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIHNlbGVjdGVkU2Vzc2lvbklkOiBzZXNzaW9uSWQsXG4gICAgICBjdXJyZW50U2Vzc2lvbjogcHJldi5zZXNzaW9ucy5maW5kKHMgPT4gcy5pZCA9PT0gc2Vzc2lvbklkKVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG5leHRRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgY3VycmVudFF1ZXN0aW9uSW5kZXg6IE1hdGgubWluKFxuICAgICAgICBwcmV2LmN1cnJlbnRRdWVzdGlvbkluZGV4ICsgMSxcbiAgICAgICAgKHByZXYuY3VycmVudFF1ZXN0aW9ucz8ubGVuZ3RoIHx8IDEpIC0gMVxuICAgICAgKVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHByZXZpb3VzUXVlc3Rpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGN1cnJlbnRRdWVzdGlvbkluZGV4OiBNYXRoLm1heChwcmV2LmN1cnJlbnRRdWVzdGlvbkluZGV4IC0gMSwgMClcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBnb1RvUXVlc3Rpb24gPSB1c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBjdXJyZW50UXVlc3Rpb25JbmRleDogTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXgsIChwcmV2LmN1cnJlbnRRdWVzdGlvbnM/Lmxlbmd0aCB8fCAxKSAtIDEpKVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIC8vIEZpbHRlcmluZyBhbmQgc29ydGluZ1xuICBjb25zdCBmaWx0ZXJTZXNzaW9ucyA9IHVzZUNhbGxiYWNrKChmaWx0ZXJzOiBRdWl6U2Vzc2lvbkZpbHRlcnMpID0+IHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBmaWx0ZXIgc2Vzc2lvbnMgYmFzZWQgb24gY3JpdGVyaWFcbiAgICBjb25zb2xlLmxvZygn8J+UjSBGaWx0ZXJpbmcgc2Vzc2lvbnM6JywgZmlsdGVycyk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzb3J0U2Vzc2lvbnMgPSB1c2VDYWxsYmFjaygoc29ydDogUXVpelNlc3Npb25Tb3J0KSA9PiB7XG4gICAgLy8gSW1wbGVtZW50YXRpb24gd291bGQgc29ydCBzZXNzaW9ucyBiYXNlZCBvbiBjcml0ZXJpYVxuICAgIGNvbnNvbGUubG9nKCfwn5OKIFNvcnRpbmcgc2Vzc2lvbnM6Jywgc29ydCk7XG4gIH0sIFtdKTtcblxuICAvLyBFcnJvciBoYW5kbGluZ1xuICBjb25zdCBjbGVhckVycm9yID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZXJyb3I6IG51bGwgfSkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2xlYXJTZXNzaW9uRXJyb3IgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBzZXNzaW9uRXJyb3I6IG51bGwgfSkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2xlYXJRdWVzdGlvbnNFcnJvciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHF1ZXN0aW9uc0Vycm9yOiBudWxsIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNsZWFyU3VibWlzc2lvbkVycm9yID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc3VibWlzc2lvbkVycm9yOiBudWxsIH0pKTtcbiAgfSwgW10pO1xuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25zXG4gIGNvbnN0IGdldEN1cnJlbnRRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKCgpOiBRdWl6UXVlc3Rpb24gfCB1bmRlZmluZWQgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5jdXJyZW50UXVlc3Rpb25zPy5bc3RhdGUuY3VycmVudFF1ZXN0aW9uSW5kZXhdO1xuICB9LCBbc3RhdGUuY3VycmVudFF1ZXN0aW9ucywgc3RhdGUuY3VycmVudFF1ZXN0aW9uSW5kZXhdKTtcblxuICBjb25zdCBnZXRTZXNzaW9uQnlJZCA9IHVzZUNhbGxiYWNrKChzZXNzaW9uSWQ6IHN0cmluZyk6IFF1aXpTZXNzaW9uIHwgdW5kZWZpbmVkID0+IHtcbiAgICByZXR1cm4gc3RhdGUuc2Vzc2lvbnMuZmluZChzID0+IHMuaWQgPT09IHNlc3Npb25JZCk7XG4gIH0sIFtzdGF0ZS5zZXNzaW9uc10pO1xuXG4gIGNvbnN0IGlzU2Vzc2lvbkNvbXBsZXRlZCA9IHVzZUNhbGxiYWNrKChzZXNzaW9uSWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBnZXRTZXNzaW9uQnlJZChzZXNzaW9uSWQpO1xuICAgIHJldHVybiBzZXNzaW9uPy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnO1xuICB9LCBbZ2V0U2Vzc2lvbkJ5SWRdKTtcblxuICBjb25zdCBnZXRTZXNzaW9uUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoc2Vzc2lvbklkOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBnZXRTZXNzaW9uQnlJZChzZXNzaW9uSWQpO1xuICAgIHJldHVybiBzZXNzaW9uPy5jb21wbGV0aW9uUmF0ZSB8fCAwO1xuICB9LCBbZ2V0U2Vzc2lvbkJ5SWRdKTtcblxuICByZXR1cm4ge1xuICAgIC4uLnN0YXRlLFxuICAgIFxuICAgIC8vIERhdGEgb3BlcmF0aW9uc1xuICAgIGxvYWRTZXNzaW9ucyxcbiAgICBsb2FkU2Vzc2lvbixcbiAgICBsb2FkU2Vzc2lvblF1ZXN0aW9ucyxcbiAgICBsb2FkU2Vzc2lvblJlc3BvbnNlcyxcbiAgICBsb2FkU2Vzc2lvbkFuYWx5dGljcyxcbiAgICByZWZyZXNoRGF0YSxcbiAgICBcbiAgICAvLyBDUlVEIG9wZXJhdGlvbnNcbiAgICBjcmVhdGVTZXNzaW9uLFxuICAgIHVwZGF0ZVNlc3Npb24sXG4gICAgZGVsZXRlU2Vzc2lvbixcbiAgICBidWxrRGVsZXRlU2Vzc2lvbnMsXG4gICAgYnVsa1VwZGF0ZVNlc3Npb25zLFxuICAgIFxuICAgIC8vIFF1aXogc2Vzc2lvbiBvcGVyYXRpb25zXG4gICAgc3RhcnRTZXNzaW9uLFxuICAgIHN1Ym1pdEFuc3dlcixcbiAgICBjb21wbGV0ZVNlc3Npb24sXG4gICAgXG4gICAgLy8gVUkgb3BlcmF0aW9uc1xuICAgIHNlbGVjdFNlc3Npb24sXG4gICAgbmV4dFF1ZXN0aW9uLFxuICAgIHByZXZpb3VzUXVlc3Rpb24sXG4gICAgZ29Ub1F1ZXN0aW9uLFxuICAgIFxuICAgIC8vIEZpbHRlcmluZyBhbmQgc29ydGluZ1xuICAgIGZpbHRlclNlc3Npb25zLFxuICAgIHNvcnRTZXNzaW9ucyxcbiAgICBcbiAgICAvLyBFcnJvciBoYW5kbGluZ1xuICAgIGNsZWFyRXJyb3IsXG4gICAgY2xlYXJTZXNzaW9uRXJyb3IsXG4gICAgY2xlYXJRdWVzdGlvbnNFcnJvcixcbiAgICBjbGVhclN1Ym1pc3Npb25FcnJvcixcbiAgICBcbiAgICAvLyBVdGlsaXR5IGZ1bmN0aW9uc1xuICAgIGdldEN1cnJlbnRRdWVzdGlvbixcbiAgICBnZXRTZXNzaW9uQnlJZCxcbiAgICBpc1Nlc3Npb25Db21wbGV0ZWQsXG4gICAgZ2V0U2Vzc2lvblByb2dyZXNzXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlUXVpekNlbnRlciIsInByb2plY3RJZCIsImF1dG9Mb2FkIiwicmVmcmVzaEludGVydmFsIiwic3RhdGUiLCJzZXRTdGF0ZSIsInVzZVN0YXRlIiwic2Vzc2lvbnMiLCJjdXJyZW50U2Vzc2lvbiIsInVuZGVmaW5lZCIsImN1cnJlbnRRdWVzdGlvbnMiLCJhbmFseXRpY3MiLCJsb2FkaW5nIiwibG9hZGluZ1Nlc3Npb25zIiwibG9hZGluZ1Nlc3Npb24iLCJsb2FkaW5nUXVlc3Rpb25zIiwic3VibWl0dGluZ0Fuc3dlciIsImdlbmVyYXRpbmdRdWl6IiwiZXJyb3IiLCJzZXNzaW9uRXJyb3IiLCJxdWVzdGlvbnNFcnJvciIsInN1Ym1pc3Npb25FcnJvciIsInNlbGVjdGVkU2Vzc2lvbklkIiwiY3VycmVudFF1ZXN0aW9uSW5kZXgiLCJzZXNzaW9uU3RhcnRlZCIsInNlc3Npb25Db21wbGV0ZWQiLCJ0b3RhbFNlc3Npb25zIiwiY29tcGxldGVkU2Vzc2lvbnMiLCJhdmVyYWdlU2NvcmUiLCJ0b3RhbFRpbWVTcGVudCIsImlzTW91bnRlZFJlZiIsInVzZVJlZiIsInJlZnJlc2hJbnRlcnZhbFJlZiIsInVzZUVmZmVjdCIsImN1cnJlbnQiLCJjbGVhckludGVydmFsIiwibG9hZFNlc3Npb25zIiwic2V0SW50ZXJ2YWwiLCJyZWZyZXNoRGF0YSIsInVzZUNhbGxiYWNrIiwicHJldiIsImNvbnNvbGUiLCJsb2ciLCJiYWNrZW5kU2Vzc2lvbnMiLCJxdWl6QXBpIiwiZ2V0UHJvamVjdFNlc3Npb25zIiwidHJhbnNmb3JtU2Vzc2lvbnMiLCJzdGF0cyIsImNhbGN1bGF0ZVByb2plY3RTdGF0cyIsIkVycm9yIiwibWVzc2FnZSIsImxvYWRTZXNzaW9uIiwic2Vzc2lvbklkIiwiYmFja2VuZFNlc3Npb24iLCJnZXRTZXNzaW9uIiwic2Vzc2lvbiIsImxvYWRTZXNzaW9uUXVlc3Rpb25zIiwiYmFja2VuZFF1ZXN0aW9ucyIsImdldFNlc3Npb25RdWVzdGlvbnMiLCJxdWVzdGlvbnMiLCJ0cmFuc2Zvcm1RdWVzdGlvbnMiLCJsb2FkU2Vzc2lvblJlc3BvbnNlcyIsImJhY2tlbmRSZXNwb25zZXMiLCJnZXRTZXNzaW9uUmVzcG9uc2VzIiwicmVzcG9uc2VzIiwidHJhbnNmb3JtUmVzcG9uc2VzIiwiZmluZCIsInMiLCJpZCIsImNhbGN1bGF0ZVNlc3Npb25TdGF0cyIsInVwZGF0ZWRTZXNzaW9uIiwibWFwIiwibG9hZFNlc3Npb25BbmFseXRpY3MiLCJiYWNrZW5kQW5hbHl0aWNzIiwiZ2V0U2Vzc2lvbkFuYWx5dGljcyIsInRyYW5zZm9ybUFuYWx5dGljcyIsImNyZWF0ZVNlc3Npb24iLCJyZXF1ZXN0IiwidXBkYXRlU2Vzc2lvbiIsImRlbGV0ZVNlc3Npb24iLCJmaWx0ZXIiLCJidWxrRGVsZXRlU2Vzc2lvbnMiLCJzZXNzaW9uSWRzIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJidWxrVXBkYXRlU2Vzc2lvbnMiLCJ1cGRhdGVzIiwic3RhcnRTZXNzaW9uIiwicmVzcG9uc2UiLCJzdWJtaXRBbnN3ZXIiLCJxdWVzdGlvbl9pZCIsInEiLCJ1c2VyQW5zd2VyIiwidXNlcl9hbnN3ZXIiLCJpc0NvcnJlY3QiLCJpc19jb3JyZWN0IiwiaXNBbnN3ZXJlZCIsImNvbXBsZXRlU2Vzc2lvbiIsInN0YXR1cyIsInNlbGVjdFNlc3Npb24iLCJuZXh0UXVlc3Rpb24iLCJNYXRoIiwibWluIiwicHJldmlvdXNRdWVzdGlvbiIsIm1heCIsImdvVG9RdWVzdGlvbiIsImluZGV4IiwiZmlsdGVyU2Vzc2lvbnMiLCJmaWx0ZXJzIiwic29ydFNlc3Npb25zIiwic29ydCIsImNsZWFyRXJyb3IiLCJjbGVhclNlc3Npb25FcnJvciIsImNsZWFyUXVlc3Rpb25zRXJyb3IiLCJjbGVhclN1Ym1pc3Npb25FcnJvciIsImdldEN1cnJlbnRRdWVzdGlvbiIsImdldFNlc3Npb25CeUlkIiwiaXNTZXNzaW9uQ29tcGxldGVkIiwiZ2V0U2Vzc2lvblByb2dyZXNzIiwiY29tcGxldGlvblJhdGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7OytCQTZFZUE7OztlQUFBQTs7O3VCQTNFeUM7eUJBQ2pDOzhCQVNqQjtBQWlFQSxTQUFTQSxjQUFjLEVBQzVCQyxTQUFTLEVBQ1RDLFdBQVcsSUFBSSxFQUNmQyxlQUFlLEVBQ007SUFFckIsbUJBQW1CO0lBQ25CLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHQyxJQUFBQSxlQUFRLEVBQWtCO1FBQ2xEQyxVQUFVLEVBQUU7UUFDWkMsZ0JBQWdCQztRQUNoQkMsa0JBQWtCRDtRQUNsQkUsV0FBV0Y7UUFFWCxpQkFBaUI7UUFDakJHLFNBQVM7UUFDVEMsaUJBQWlCO1FBQ2pCQyxnQkFBZ0I7UUFDaEJDLGtCQUFrQjtRQUNsQkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7UUFFaEIsZUFBZTtRQUNmQyxPQUFPO1FBQ1BDLGNBQWM7UUFDZEMsZ0JBQWdCO1FBQ2hCQyxpQkFBaUI7UUFFakIsV0FBVztRQUNYQyxtQkFBbUJiO1FBQ25CYyxzQkFBc0I7UUFDdEJDLGdCQUFnQjtRQUNoQkMsa0JBQWtCO1FBRWxCLFFBQVE7UUFDUkMsZUFBZTtRQUNmQyxtQkFBbUI7UUFDbkJDLGNBQWM7UUFDZEMsZ0JBQWdCO0lBQ2xCO0lBRUEsZ0NB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