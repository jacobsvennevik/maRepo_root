{"version":3,"sources":["/Users/jacobhornsvennevik/Documents/GitHub/maRepo_root/frontend/src/components/wizard/shared/__tests__/useMultiSourceManagement.integration.test.tsx"],"sourcesContent":["import { renderHook, act, waitFor } from '@testing-library/react'\nimport useMultiSourceManagement from '../useMultiSourceManagement'\n\njest.mock('@/lib/projectApi', () => ({ getProjectScoped: jest.fn() }))\nconst { getProjectScoped } = jest.requireMock('@/lib/projectApi') as { getProjectScoped: jest.Mock }\n\ndescribe('useMultiSourceManagement - integration', () => {\n  const projectId = '203062be-58d0-4f98-bbd4-33b4ce081276'\n\n  beforeEach(() => {\n    getProjectScoped.mockReset()\n    process.env.NODE_ENV = 'test'\n  })\n\n  it('calls expected project-scoped paths for flashcards/files/study-materials', async () => {\n    getProjectScoped\n      .mockResolvedValueOnce({ data: [] }) // flashcard-decks\n      .mockResolvedValueOnce({ data: [] }) // files\n      .mockResolvedValueOnce({ data: [] }) // study-materials\n\n    renderHook(() => useMultiSourceManagement({ projectId, autoLoad: true }))\n\n    await waitFor(() => expect(getProjectScoped).toHaveBeenCalledTimes(3))\n\n    const calls = getProjectScoped.mock.calls.map((c: any[]) => c[0])\n    expect(calls).toContain('flashcard-decks/')\n    expect(calls).toContain('files/')\n    expect(calls).toContain('study-materials/')\n  })\n\n  it('returns empty arrays on network error in test mode', async () => {\n    const netErr: any = new Error('Network Error')\n    netErr.code = 'ERR_NETWORK'\n    getProjectScoped\n      .mockRejectedValueOnce(netErr)\n      .mockRejectedValueOnce(netErr)\n      .mockRejectedValueOnce(netErr)\n\n    const { result } = renderHook(() => useMultiSourceManagement({ projectId, autoLoad: true }))\n\n    await waitFor(() => expect(getProjectScoped).toHaveBeenCalledTimes(3))\n\n    expect(result.current.flashcards).toEqual([])\n    expect(result.current.files).toEqual([])\n    expect(result.current.studyMaterials).toEqual([])\n  })\n})\n"],"names":["jest","mock","getProjectScoped","fn","requireMock","describe","projectId","beforeEach","mockReset","process","env","NODE_ENV","it","mockResolvedValueOnce","data","renderHook","useMultiSourceManagement","autoLoad","waitFor","expect","toHaveBeenCalledTimes","calls","map","c","toContain","netErr","Error","code","mockRejectedValueOnce","result","current","flashcards","toEqual","files","studyMaterials"],"mappings":";AAGAA,KAAKC,IAAI,CAAC,oBAAoB,IAAO,CAAA;QAAEC,kBAAkBF,KAAKG,EAAE;IAAG,CAAA;;;;uBAH1B;iFACJ;;;;;;AAGrC,MAAM,EAAED,gBAAgB,EAAE,GAAGF,KAAKI,WAAW,CAAC;AAE9CC,SAAS,0CAA0C;IACjD,MAAMC,YAAY;IAElBC,WAAW;QACTL,iBAAiBM,SAAS;QAC1BC,QAAQC,GAAG,CAACC,QAAQ,GAAG;IACzB;IAEAC,GAAG,4EAA4E;QAC7EV,iBACGW,qBAAqB,CAAC;YAAEC,MAAM,EAAE;QAAC,GAAG,kBAAkB;SACtDD,qBAAqB,CAAC;YAAEC,MAAM,EAAE;QAAC,GAAG,QAAQ;SAC5CD,qBAAqB,CAAC;YAAEC,MAAM,EAAE;QAAC,GAAG,kBAAkB;;QAEzDC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,iCAAwB,EAAC;gBAAEV;gBAAWW,UAAU;YAAK;QAEtE,MAAMC,IAAAA,cAAO,EAAC,IAAMC,OAAOjB,kBAAkBkB,qBAAqB,CAAC;QAEnE,MAAMC,QAAQnB,iBAAiBD,IAAI,CAACoB,KAAK,CAACC,GAAG,CAAC,CAACC,IAAaA,CAAC,CAAC,EAAE;QAChEJ,OAAOE,OAAOG,SAAS,CAAC;QACxBL,OAAOE,OAAOG,SAAS,CAAC;QACxBL,OAAOE,OAAOG,SAAS,CAAC;IAC1B;IAEAZ,GAAG,sDAAsD;QACvD,MAAMa,SAAc,IAAIC,MAAM;QAC9BD,OAAOE,IAAI,GAAG;QACdzB,iBACG0B,qBAAqB,CAACH,QACtBG,qBAAqB,CAACH,QACtBG,qBAAqB,CAACH;QAEzB,MAAM,EAAEI,MAAM,EAAE,GAAGd,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,iCAAwB,EAAC;gBAAEV;gBAAWW,UAAU;YAAK;QAEzF,MAAMC,IAAAA,cAAO,EAAC,IAAMC,OAAOjB,kBAAkBkB,qBAAqB,CAAC;QAEnED,OAAOU,OAAOC,OAAO,CAACC,UAAU,EAAEC,OAAO,CAAC,EAAE;QAC5Cb,OAAOU,OAAOC,OAAO,CAACG,KAAK,EAAED,OAAO,CAAC,EAAE;QACvCb,OAAOU,OAAOC,OAAO,CAACI,cAAc,EAAEF,OAAO,CAAC,EAAE;IAClD;AACF"}