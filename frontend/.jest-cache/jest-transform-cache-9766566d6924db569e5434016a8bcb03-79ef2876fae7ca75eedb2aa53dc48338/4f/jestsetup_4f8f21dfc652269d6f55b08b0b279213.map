{"version":3,"sources":["/Users/jacobhornsvennevik/Documents/GitHub/maRepo_root/frontend/src/test-utils/setup/jest.setup.ts"],"sourcesContent":["import '@testing-library/jest-dom';\nimport { urlMatchers } from '../../../tests/matchers/urlMatchers';\n\n// Setup MSW server (optional)\nlet server: any = null;\ntry {\n  const { setupServer } = require('msw/node');\n  const { handlers } = require('../../tests/msw/handlers');\n  server = setupServer(...handlers);\n} catch (error) {\n  console.warn('MSW not available, skipping server setup');\n}\n\n// Global test setup\nbeforeAll(() => {\n  // Register custom Jest matchers\n  expect.extend(urlMatchers);\n  \n  // Start MSW server if available\n  if (server) {\n    server.listen({ onUnhandledRequest: 'error' });\n  }\n  \n  // Setup global mocks\n  global.ResizeObserver = jest.fn().mockImplementation(() => ({\n    observe: jest.fn(),\n    unobserve: jest.fn(),\n    disconnect: jest.fn(),\n  }));\n\n  // Mock IntersectionObserver\n  global.IntersectionObserver = jest.fn().mockImplementation(() => ({\n    observe: jest.fn(),\n    unobserve: jest.fn(),\n    disconnect: jest.fn(),\n  }));\n\n  // Mock matchMedia\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: jest.fn().mockImplementation(query => ({\n      matches: false,\n      media: query,\n      onchange: null,\n      addListener: jest.fn(), // deprecated\n      removeListener: jest.fn(), // deprecated\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n      dispatchEvent: jest.fn(),\n    })),\n  });\n\n  // Mock scrollTo\n  global.scrollTo = jest.fn();\n\n  // Mock console methods to reduce noise in tests\n  const originalError = console.error;\n  const originalWarn = console.warn;\n  \n  console.error = (...args) => {\n    if (\n      typeof args[0] === 'string' &&\n      args[0].includes('Warning: ReactDOM.render is no longer supported')\n    ) {\n      return;\n    }\n    originalError.call(console, ...args);\n  };\n\n  console.warn = (...args) => {\n    if (\n      typeof args[0] === 'string' &&\n      (args[0].includes('componentWillReceiveProps') ||\n       args[0].includes('componentWillMount'))\n    ) {\n      return;\n    }\n    originalWarn.call(console, ...args);\n  };\n});\n\n// Reset handlers between tests\nafterEach(() => {\n  if (server) {\n    server.resetHandlers();\n  }\n});\n\n// Cleanup after all tests\nafterAll(() => {\n  if (server) {\n    server.close();\n  }\n});\n\n// Global test utilities\ndeclare global {\n  namespace jest {\n    interface Matchers<R> {\n      toBeInTheDocument(): R;\n      toHaveClass(className: string): R;\n      toHaveTextContent(text: string | RegExp): R;\n      toBeVisible(): R;\n      toBeDisabled(): R;\n      toBeEnabled(): R;\n      toHaveValue(value: string | string[] | number): R;\n      toHaveAttribute(attr: string, value?: string): R;\n      toHaveStyle(css: string | Record<string, any>): R;\n      toStartWithApi(): R;\n      toHaveNoDoubleSlash(): R;\n      toBeSameBaseURLAs(other: any): R;\n    }\n  }\n}\n"],"names":["server","setupServer","require","handlers","error","console","warn","beforeAll","expect","extend","urlMatchers","listen","onUnhandledRequest","global","ResizeObserver","jest","fn","mockImplementation","observe","unobserve","disconnect","IntersectionObserver","Object","defineProperty","window","writable","value","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","scrollTo","originalError","originalWarn","args","includes","call","afterEach","resetHandlers","afterAll","close"],"mappings":";;;;QAAO;6BACqB;AAE5B,8BAA8B;AAC9B,IAAIA,SAAc;AAClB,IAAI;IACF,MAAM,EAAEC,WAAW,EAAE,GAAGC,QAAQ;IAChC,MAAM,EAAEC,QAAQ,EAAE,GAAGD,QAAQ;IAC7BF,SAASC,eAAeE;AAC1B,EAAE,OAAOC,OAAO;IACdC,QAAQC,IAAI,CAAC;AACf;AAEA,oBAAoB;AACpBC,UAAU;IACR,gCAAgC;IAChCC,OAAOC,MAAM,CAACC,wBAAW;IAEzB,gCAAgC;IAChC,IAAIV,QAAQ;QACVA,OAAOW,MAAM,CAAC;YAAEC,oBAAoB;QAAQ;IAC9C;IAEA,qBAAqB;IACrBC,OAAOC,cAAc,GAAGC,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,IAAO,CAAA;YAC1DC,SAASH,KAAKC,EAAE;YAChBG,WAAWJ,KAAKC,EAAE;YAClBI,YAAYL,KAAKC,EAAE;QACrB,CAAA;IAEA,4BAA4B;IAC5BH,OAAOQ,oBAAoB,GAAGN,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,IAAO,CAAA;YAChEC,SAASH,KAAKC,EAAE;YAChBG,WAAWJ,KAAKC,EAAE;YAClBI,YAAYL,KAAKC,EAAE;QACrB,CAAA;IAEA,kBAAkB;IAClBM,OAAOC,cAAc,CAACC,QAAQ,cAAc;QAC1CC,UAAU;QACVC,OAAOX,KAAKC,EAAE,GAAGC,kBAAkB,CAACU,CAAAA,QAAU,CAAA;gBAC5CC,SAAS;gBACTC,OAAOF;gBACPG,UAAU;gBACVC,aAAahB,KAAKC,EAAE;gBACpBgB,gBAAgBjB,KAAKC,EAAE;gBACvBiB,kBAAkBlB,KAAKC,EAAE;gBACzBkB,qBAAqBnB,KAAKC,EAAE;gBAC5BmB,eAAepB,KAAKC,EAAE;YACxB,CAAA;IACF;IAEA,gBAAgB;IAChBH,OAAOuB,QAAQ,GAAGrB,KAAKC,EAAE;IAEzB,gDAAgD;IAChD,MAAMqB,gBAAgBhC,QAAQD,KAAK;IACnC,MAAMkC,eAAejC,QAAQC,IAAI;IAEjCD,QAAQD,KAAK,GAAG,CAAC,GAAGmC;QAClB,IACE,OAAOA,IAAI,CAAC,EAAE,KAAK,YACnBA,IAAI,CAAC,EAAE,CAACC,QAAQ,CAAC,oDACjB;YACA;QACF;QACAH,cAAcI,IAAI,CAACpC,YAAYkC;IACjC;IAEAlC,QAAQC,IAAI,GAAG,CAAC,GAAGiC;QACjB,IACE,OAAOA,IAAI,CAAC,EAAE,KAAK,YAClBA,CAAAA,IAAI,CAAC,EAAE,CAACC,QAAQ,CAAC,gCACjBD,IAAI,CAAC,EAAE,CAACC,QAAQ,CAAC,qBAAoB,GACtC;YACA;QACF;QACAF,aAAaG,IAAI,CAACpC,YAAYkC;IAChC;AACF;AAEA,+BAA+B;AAC/BG,UAAU;IACR,IAAI1C,QAAQ;QACVA,OAAO2C,aAAa;IACtB;AACF;AAEA,0BAA0B;AAC1BC,SAAS;IACP,IAAI5C,QAAQ;QACVA,OAAO6C,KAAK;IACd;AACF"}