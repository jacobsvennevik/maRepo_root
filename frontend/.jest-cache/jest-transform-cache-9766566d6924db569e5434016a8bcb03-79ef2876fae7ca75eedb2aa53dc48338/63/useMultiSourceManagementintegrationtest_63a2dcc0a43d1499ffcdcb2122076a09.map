{"version":3,"sources":["/Users/jacobhornsvennevik/Documents/GitHub/maRepo_root/frontend/src/components/wizard/shared/__tests__/useMultiSourceManagement.integration.test.tsx"],"sourcesContent":["import { renderHook, act } from '@testing-library/react'\nimport useMultiSourceManagement from '../useMultiSourceManagement'\nimport { axiosApi } from '@/lib/axios'\n\njest.mock('@/lib/axios-api', () => ({ axiosApi: { get: jest.fn(), post: jest.fn() } }))\n\ndescribe('useMultiSourceManagement - integration', () => {\n  const projectId = '203062be-58d0-4f98-bbd4-33b4ce081276'\n\n  beforeEach(() => {\n    (axiosApi.get as any).mockReset?.()\n    (axiosApi.post as any).mockReset?.()\n    process.env.NODE_ENV = 'test'\n  })\n\n  it('calls expected URLs for flashcards/files/study-materials', async () => {\n    ;(axiosApi.get as any)\n      .mockResolvedValueOnce({ data: [] }) // flashcard-decks\n      .mockResolvedValueOnce({ data: [] }) // files\n      .mockResolvedValueOnce({ data: [] }) // study-materials\n\n    const { result } = renderHook(() => useMultiSourceManagement({ projectId, autoLoad: true }))\n\n    // allow effects to flush\n    await act(async () => {})\n\n    const calls = (axiosApi.get as any).mock.calls.map((c: any[]) => c[0])\n    expect(calls).toContain(`projects/${projectId}/flashcard-decks/`)\n    expect(calls).toContain(`projects/${projectId}/files/`)\n    expect(calls).toContain(`projects/${projectId}/study-materials/`)\n\n    expect(result.current.flashcards).toEqual([])\n    expect(result.current.files).toEqual([])\n    expect(result.current.studyMaterials).toEqual([])\n  })\n\n  it('returns empty arrays on network error in test mode', async () => {\n    const netErr: any = new Error('Network Error')\n    netErr.code = 'ERR_NETWORK'\n    ;(axiosApi.get as any)\n      .mockRejectedValueOnce(netErr)\n      .mockRejectedValueOnce(netErr)\n      .mockRejectedValueOnce(netErr)\n\n    const { result } = renderHook(() => useMultiSourceManagement({ projectId, autoLoad: true }))\n\n    await act(async () => {})\n\n    expect(result.current.flashcards).toEqual([])\n    expect(result.current.files).toEqual([])\n    expect(result.current.studyMaterials).toEqual([])\n  })\n})\n"],"names":["jest","mock","axiosApi","get","fn","post","describe","projectId","beforeEach","mockReset","process","env","NODE_ENV","it","mockResolvedValueOnce","data","result","renderHook","useMultiSourceManagement","autoLoad","act","calls","map","c","expect","toContain","current","flashcards","toEqual","files","studyMaterials","netErr","Error","code","mockRejectedValueOnce"],"mappings":";AAIAA,KAAKC,IAAI,CAAC,mBAAmB,IAAO,CAAA;QAAEC,UAAU;YAAEC,KAAKH,KAAKI,EAAE;YAAIC,MAAML,KAAKI,EAAE;QAAG;IAAE,CAAA;;;;uBAJpD;iFACK;uBACZ;;;;;;AAIzBE,SAAS,0CAA0C;IACjD,MAAMC,YAAY;IAElBC,WAAW;QACRN,eAAQ,CAACC,GAAG,CAASM,SAAS,KAC9BP,eAAQ,CAACG,IAAI,EAASI;QACvBC,QAAQC,GAAG,CAACC,QAAQ,GAAG;IACzB;IAEAC,GAAG,4DAA4D;;QAC3DX,eAAQ,CAACC,GAAG,CACXW,qBAAqB,CAAC;YAAEC,MAAM,EAAE;QAAC,GAAG,kBAAkB;SACtDD,qBAAqB,CAAC;YAAEC,MAAM,EAAE;QAAC,GAAG,QAAQ;SAC5CD,qBAAqB,CAAC;YAAEC,MAAM,EAAE;QAAC,GAAG,kBAAkB;;QAEzD,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,iCAAwB,EAAC;gBAAEX;gBAAWY,UAAU;YAAK;QAEzF,yBAAyB;QACzB,MAAMC,IAAAA,UAAG,EAAC,WAAa;QAEvB,MAAMC,QAAQ,AAACnB,eAAQ,CAACC,GAAG,CAASF,IAAI,CAACoB,KAAK,CAACC,GAAG,CAAC,CAACC,IAAaA,CAAC,CAAC,EAAE;QACrEC,OAAOH,OAAOI,SAAS,CAAC,CAAC,SAAS,EAAElB,UAAU,iBAAiB,CAAC;QAChEiB,OAAOH,OAAOI,SAAS,CAAC,CAAC,SAAS,EAAElB,UAAU,OAAO,CAAC;QACtDiB,OAAOH,OAAOI,SAAS,CAAC,CAAC,SAAS,EAAElB,UAAU,iBAAiB,CAAC;QAEhEiB,OAAOR,OAAOU,OAAO,CAACC,UAAU,EAAEC,OAAO,CAAC,EAAE;QAC5CJ,OAAOR,OAAOU,OAAO,CAACG,KAAK,EAAED,OAAO,CAAC,EAAE;QACvCJ,OAAOR,OAAOU,OAAO,CAACI,cAAc,EAAEF,OAAO,CAAC,EAAE;IAClD;IAEAf,GAAG,sDAAsD;QACvD,MAAMkB,SAAc,IAAIC,MAAM;QAC9BD,OAAOE,IAAI,GAAG;QACZ/B,eAAQ,CAACC,GAAG,CACX+B,qBAAqB,CAACH,QACtBG,qBAAqB,CAACH,QACtBG,qBAAqB,CAACH;QAEzB,MAAM,EAAEf,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,iCAAwB,EAAC;gBAAEX;gBAAWY,UAAU;YAAK;QAEzF,MAAMC,IAAAA,UAAG,EAAC,WAAa;QAEvBI,OAAOR,OAAOU,OAAO,CAACC,UAAU,EAAEC,OAAO,CAAC,EAAE;QAC5CJ,OAAOR,OAAOU,OAAO,CAACG,KAAK,EAAED,OAAO,CAAC,EAAE;QACvCJ,OAAOR,OAAOU,OAAO,CAACI,cAAc,EAAEF,OAAO,CAAC,EAAE;IAClD;AACF"}