8af4400fab2f32b798d62e0061006d6c
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _syllabusuploadstep = require("../syllabus-upload-step");
const _globals = require("@jest/globals");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock the dependencies
_globals.jest.mock('next/navigation', ()=>({
        useRouter: ()=>({
                push: _globals.jest.fn()
            })
    }));
_globals.jest.mock('../../../services/mock-data', ()=>({
        isTestMode: ()=>true,
        MOCK_SYLLABUS_EXTRACTION: {
            course_title: 'Test Course',
            instructor: 'Test Instructor',
            topics: [
                'Topic 1',
                'Topic 2'
            ],
            exam_dates: [
                {
                    date: '2025-01-01',
                    description: 'Test Exam'
                }
            ]
        },
        createMockProcessedDocument: _globals.jest.fn(()=>({
                id: 123,
                original_text: 'Test text',
                metadata: {
                    course_title: 'Test Course'
                },
                status: 'completed'
            })),
        simulateProcessingDelay: _globals.jest.fn(()=>Promise.resolve())
    }));
describe('SyllabusUploadStep', ()=>{
    const mockOnUploadComplete = _globals.jest.fn();
    const mockOnNext = _globals.jest.fn();
    const mockOnBack = _globals.jest.fn();
    const mockOnSkip = _globals.jest.fn();
    const mockOnResetUploadState = _globals.jest.fn();
    beforeEach(()=>{
        _globals.jest.clearAllMocks();
    });
    it('should allow file upload and trigger analysis', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_syllabusuploadstep.SyllabusUploadStep, {
            onUploadComplete: mockOnUploadComplete,
            onNext: mockOnNext,
            onBack: mockOnBack,
            onSkip: mockOnSkip,
            onResetUploadState: mockOnResetUploadState,
            hasUploadCompleted: false
        }));
        // Verify the component renders the upload interface
        expect(_react1.screen.getByText(/upload your course materials/i)).toBeInTheDocument();
        expect(_react1.screen.getByText(/browse for course materials/i)).toBeInTheDocument();
    });
    it('should reset upload state when starting new analysis', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_syllabusuploadstep.SyllabusUploadStep, {
            onUploadComplete: mockOnUploadComplete,
            onNext: mockOnNext,
            onBack: mockOnBack,
            onSkip: mockOnSkip,
            onResetUploadState: mockOnResetUploadState,
            hasUploadCompleted: true
        }));
        // The component should still render and allow new uploads
        expect(_react1.screen.getByText(/upload your course materials/i)).toBeInTheDocument();
    });
    it('should call onUploadComplete only once per session', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_syllabusuploadstep.SyllabusUploadStep, {
            onUploadComplete: mockOnUploadComplete,
            onNext: mockOnNext,
            onBack: mockOnBack,
            onSkip: mockOnSkip,
            onResetUploadState: mockOnResetUploadState,
            hasUploadCompleted: false
        }));
        // Simulate successful analysis completion
        // This would normally happen after the analysis is complete
        // For testing, we'll verify the component structure
        expect(mockOnUploadComplete).not.toHaveBeenCalled();
    });
    it('should show success message and navigate after analysis', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_syllabusuploadstep.SyllabusUploadStep, {
            onUploadComplete: mockOnUploadComplete,
            onNext: mockOnNext,
            onBack: mockOnBack,
            onSkip: mockOnSkip,
            onResetUploadState: mockOnResetUploadState,
            hasUploadCompleted: false
        }));
        // Verify the component renders the upload interface
        expect(_react1.screen.getByText(/upload your course materials/i)).toBeInTheDocument();
        expect(_react1.screen.getByText(/browse for course materials/i)).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYWNvYmhvcm5zdmVubmV2aWsvRG9jdW1lbnRzL0dpdEh1Yi9tYVJlcG9fcm9vdC9mcm9udGVuZC9zcmMvZmVhdHVyZXMvcHJvamVjdHMvY29tcG9uZW50cy9zdGVwcy9fX3Rlc3RzX18vc3lsbGFidXMtdXBsb2FkLXN0ZXAudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFN5bGxhYnVzVXBsb2FkU3RlcCB9IGZyb20gJy4uL3N5bGxhYnVzLXVwbG9hZC1zdGVwJztcbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuLy8gTW9jayB0aGUgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogKCkgPT4gKHtcbiAgICBwdXNoOiBqZXN0LmZuKCksXG4gIH0pLFxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NlcnZpY2VzL21vY2stZGF0YScsICgpID0+ICh7XG4gIGlzVGVzdE1vZGU6ICgpID0+IHRydWUsXG4gIE1PQ0tfU1lMTEFCVVNfRVhUUkFDVElPTjoge1xuICAgIGNvdXJzZV90aXRsZTogJ1Rlc3QgQ291cnNlJyxcbiAgICBpbnN0cnVjdG9yOiAnVGVzdCBJbnN0cnVjdG9yJyxcbiAgICB0b3BpY3M6IFsnVG9waWMgMScsICdUb3BpYyAyJ10sXG4gICAgZXhhbV9kYXRlczogW1xuICAgICAgeyBkYXRlOiAnMjAyNS0wMS0wMScsIGRlc2NyaXB0aW9uOiAnVGVzdCBFeGFtJyB9XG4gICAgXSxcbiAgfSxcbiAgY3JlYXRlTW9ja1Byb2Nlc3NlZERvY3VtZW50OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgaWQ6IDEyMyxcbiAgICBvcmlnaW5hbF90ZXh0OiAnVGVzdCB0ZXh0JyxcbiAgICBtZXRhZGF0YTogeyBjb3Vyc2VfdGl0bGU6ICdUZXN0IENvdXJzZScgfSxcbiAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICB9KSksXG4gIHNpbXVsYXRlUHJvY2Vzc2luZ0RlbGF5OiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbn0pKTtcblxuZGVzY3JpYmUoJ1N5bGxhYnVzVXBsb2FkU3RlcCcsICgpID0+IHtcbiAgY29uc3QgbW9ja09uVXBsb2FkQ29tcGxldGUgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tPbk5leHQgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tPbkJhY2sgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tPblNraXAgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tPblJlc2V0VXBsb2FkU3RhdGUgPSBqZXN0LmZuKCk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYWxsb3cgZmlsZSB1cGxvYWQgYW5kIHRyaWdnZXIgYW5hbHlzaXMnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFN5bGxhYnVzVXBsb2FkU3RlcFxuICAgICAgICBvblVwbG9hZENvbXBsZXRlPXttb2NrT25VcGxvYWRDb21wbGV0ZX1cbiAgICAgICAgb25OZXh0PXttb2NrT25OZXh0fVxuICAgICAgICBvbkJhY2s9e21vY2tPbkJhY2t9XG4gICAgICAgIG9uU2tpcD17bW9ja09uU2tpcH1cbiAgICAgICAgb25SZXNldFVwbG9hZFN0YXRlPXttb2NrT25SZXNldFVwbG9hZFN0YXRlfVxuICAgICAgICBoYXNVcGxvYWRDb21wbGV0ZWQ9e2ZhbHNlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgLy8gVmVyaWZ5IHRoZSBjb21wb25lbnQgcmVuZGVycyB0aGUgdXBsb2FkIGludGVyZmFjZVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC91cGxvYWQgeW91ciBjb3Vyc2UgbWF0ZXJpYWxzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9icm93c2UgZm9yIGNvdXJzZSBtYXRlcmlhbHMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVzZXQgdXBsb2FkIHN0YXRlIHdoZW4gc3RhcnRpbmcgbmV3IGFuYWx5c2lzJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxTeWxsYWJ1c1VwbG9hZFN0ZXBcbiAgICAgICAgb25VcGxvYWRDb21wbGV0ZT17bW9ja09uVXBsb2FkQ29tcGxldGV9XG4gICAgICAgIG9uTmV4dD17bW9ja09uTmV4dH1cbiAgICAgICAgb25CYWNrPXttb2NrT25CYWNrfVxuICAgICAgICBvblNraXA9e21vY2tPblNraXB9XG4gICAgICAgIG9uUmVzZXRVcGxvYWRTdGF0ZT17bW9ja09uUmVzZXRVcGxvYWRTdGF0ZX1cbiAgICAgICAgaGFzVXBsb2FkQ29tcGxldGVkPXt0cnVlfSAvLyBTaW11bGF0ZSBwcmV2aW91cyB1cGxvYWQgY29tcGxldGVkXG4gICAgICAvPlxuICAgICk7XG5cbiAgICAvLyBUaGUgY29tcG9uZW50IHNob3VsZCBzdGlsbCByZW5kZXIgYW5kIGFsbG93IG5ldyB1cGxvYWRzXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3VwbG9hZCB5b3VyIGNvdXJzZSBtYXRlcmlhbHMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2FsbCBvblVwbG9hZENvbXBsZXRlIG9ubHkgb25jZSBwZXIgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8U3lsbGFidXNVcGxvYWRTdGVwXG4gICAgICAgIG9uVXBsb2FkQ29tcGxldGU9e21vY2tPblVwbG9hZENvbXBsZXRlfVxuICAgICAgICBvbk5leHQ9e21vY2tPbk5leHR9XG4gICAgICAgIG9uQmFjaz17bW9ja09uQmFja31cbiAgICAgICAgb25Ta2lwPXttb2NrT25Ta2lwfVxuICAgICAgICBvblJlc2V0VXBsb2FkU3RhdGU9e21vY2tPblJlc2V0VXBsb2FkU3RhdGV9XG4gICAgICAgIGhhc1VwbG9hZENvbXBsZXRlZD17ZmFsc2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICAvLyBTaW11bGF0ZSBzdWNjZXNzZnVsIGFuYWx5c2lzIGNvbXBsZXRpb25cbiAgICAvLyBUaGlzIHdvdWxkIG5vcm1hbGx5IGhhcHBlbiBhZnRlciB0aGUgYW5hbHlzaXMgaXMgY29tcGxldGVcbiAgICAvLyBGb3IgdGVzdGluZywgd2UnbGwgdmVyaWZ5IHRoZSBjb21wb25lbnQgc3RydWN0dXJlXG4gICAgZXhwZWN0KG1vY2tPblVwbG9hZENvbXBsZXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNob3cgc3VjY2VzcyBtZXNzYWdlIGFuZCBuYXZpZ2F0ZSBhZnRlciBhbmFseXNpcycsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8U3lsbGFidXNVcGxvYWRTdGVwXG4gICAgICAgIG9uVXBsb2FkQ29tcGxldGU9e21vY2tPblVwbG9hZENvbXBsZXRlfVxuICAgICAgICBvbk5leHQ9e21vY2tPbk5leHR9XG4gICAgICAgIG9uQmFjaz17bW9ja09uQmFja31cbiAgICAgICAgb25Ta2lwPXttb2NrT25Ta2lwfVxuICAgICAgICBvblJlc2V0VXBsb2FkU3RhdGU9e21vY2tPblJlc2V0VXBsb2FkU3RhdGV9XG4gICAgICAgIGhhc1VwbG9hZENvbXBsZXRlZD17ZmFsc2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICAvLyBWZXJpZnkgdGhlIGNvbXBvbmVudCByZW5kZXJzIHRoZSB1cGxvYWQgaW50ZXJmYWNlXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3VwbG9hZCB5b3VyIGNvdXJzZSBtYXRlcmlhbHMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2Jyb3dzZSBmb3IgY291cnNlIG1hdGVyaWFscy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG59KTsgIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlUm91dGVyIiwicHVzaCIsImZuIiwiaXNUZXN0TW9kZSIsIk1PQ0tfU1lMTEFCVVNfRVhUUkFDVElPTiIsImNvdXJzZV90aXRsZSIsImluc3RydWN0b3IiLCJ0b3BpY3MiLCJleGFtX2RhdGVzIiwiZGF0ZSIsImRlc2NyaXB0aW9uIiwiY3JlYXRlTW9ja1Byb2Nlc3NlZERvY3VtZW50IiwiaWQiLCJvcmlnaW5hbF90ZXh0IiwibWV0YWRhdGEiLCJzdGF0dXMiLCJzaW11bGF0ZVByb2Nlc3NpbmdEZWxheSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGVzY3JpYmUiLCJtb2NrT25VcGxvYWRDb21wbGV0ZSIsIm1vY2tPbk5leHQiLCJtb2NrT25CYWNrIiwibW9ja09uU2tpcCIsIm1vY2tPblJlc2V0VXBsb2FkU3RhdGUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwicmVuZGVyIiwiU3lsbGFidXNVcGxvYWRTdGVwIiwib25VcGxvYWRDb21wbGV0ZSIsIm9uTmV4dCIsIm9uQmFjayIsIm9uU2tpcCIsIm9uUmVzZXRVcGxvYWRTdGF0ZSIsImhhc1VwbG9hZENvbXBsZXRlZCIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50Iiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OERBQWtCO3dCQUNpQztvQ0FDaEI7eUJBQ2Q7Ozs7OztBQUVyQix3QkFBd0I7QUFDeEJBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDLG1CQUFtQixJQUFPLENBQUE7UUFDbENDLFdBQVcsSUFBTyxDQUFBO2dCQUNoQkMsTUFBTUgsYUFBSSxDQUFDSSxFQUFFO1lBQ2YsQ0FBQTtJQUNGLENBQUE7QUFFQUosYUFBSSxD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