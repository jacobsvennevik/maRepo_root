{"version":3,"sources":["/Users/jacobhornsvennevik/Documents/GitHub/maRepo_root/frontend/src/lib/__tests__/projectId.test.ts"],"sourcesContent":["import { normalizeProjectId, persistActiveProjectId, looksLikeUuid } from '../projectId'\n\ndescribe('projectId utils', () => {\n  const uuid = '203062be-58d0-4f98-bbd4-33b4ce081276'\n\n  beforeEach(() => {\n    // @ts-ignore\n    delete (global as any).__activeProjectId\n    // @ts-ignore\n    delete (global as any).localStorage\n  })\n\n  it('detects uuid', () => {\n    expect(looksLikeUuid(uuid)).toBe(true)\n    expect(looksLikeUuid('1')).toBe(false)\n  })\n\n  it('returns uuid as-is', () => {\n    expect(normalizeProjectId(uuid)).toBe(uuid)\n  })\n\n  it('uses global hint when numeric id', () => {\n    // @ts-ignore\n    ;(global as any).__activeProjectId = uuid\n    expect(normalizeProjectId('1')).toBe(uuid)\n  })\n\n  it('uses localStorage activeProjectId when numeric id', () => {\n    const storageMock = {\n      getItem: (k: string) => (k === 'activeProjectId' ? uuid : null),\n      setItem: jest.fn(),\n      removeItem: jest.fn(),\n      clear: jest.fn(),\n      key: jest.fn(),\n      length: 0,\n    }\n    // @ts-ignore\n    ;(global as any).localStorage = storageMock\n    expect(normalizeProjectId('1')).toBe(uuid)\n  })\n\n  it('persistActiveProjectId writes safely', () => {\n    const setItem = jest.fn()\n    const storageMock = {\n      getItem: jest.fn(),\n      setItem,\n      removeItem: jest.fn(),\n      clear: jest.fn(),\n      key: jest.fn(),\n      length: 0,\n    }\n    // @ts-ignore\n    ;(global as any).localStorage = storageMock\n    persistActiveProjectId(uuid)\n    expect(setItem).toHaveBeenCalledWith('activeProjectId', uuid)\n  })\n})\n"],"names":["describe","uuid","beforeEach","global","__activeProjectId","localStorage","it","expect","looksLikeUuid","toBe","normalizeProjectId","storageMock","getItem","k","setItem","jest","fn","removeItem","clear","key","length","persistActiveProjectId","toHaveBeenCalledWith"],"mappings":";;;;2BAA0E;AAE1EA,SAAS,mBAAmB;IAC1B,MAAMC,OAAO;IAEbC,WAAW;QACT,aAAa;QACb,OAAO,AAACC,OAAeC,iBAAiB;QACxC,aAAa;QACb,OAAO,AAACD,OAAeE,YAAY;IACrC;IAEAC,GAAG,gBAAgB;QACjBC,OAAOC,IAAAA,wBAAa,EAACP,OAAOQ,IAAI,CAAC;QACjCF,OAAOC,IAAAA,wBAAa,EAAC,MAAMC,IAAI,CAAC;IAClC;IAEAH,GAAG,sBAAsB;QACvBC,OAAOG,IAAAA,6BAAkB,EAACT,OAAOQ,IAAI,CAACR;IACxC;IAEAK,GAAG,oCAAoC;QACrC,aAAa;;QACXH,OAAeC,iBAAiB,GAAGH;QACrCM,OAAOG,IAAAA,6BAAkB,EAAC,MAAMD,IAAI,CAACR;IACvC;IAEAK,GAAG,qDAAqD;QACtD,MAAMK,cAAc;YAClBC,SAAS,CAACC,IAAeA,MAAM,oBAAoBZ,OAAO;YAC1Da,SAASC,KAAKC,EAAE;YAChBC,YAAYF,KAAKC,EAAE;YACnBE,OAAOH,KAAKC,EAAE;YACdG,KAAKJ,KAAKC,EAAE;YACZI,QAAQ;QACV;QAEEjB,OAAeE,YAAY,GAAGM;QAChCJ,OAAOG,IAAAA,6BAAkB,EAAC,MAAMD,IAAI,CAACR;IACvC;IAEAK,GAAG,wCAAwC;QACzC,MAAMQ,UAAUC,KAAKC,EAAE;QACvB,MAAML,cAAc;YAClBC,SAASG,KAAKC,EAAE;YAChBF;YACAG,YAAYF,KAAKC,EAAE;YACnBE,OAAOH,KAAKC,EAAE;YACdG,KAAKJ,KAAKC,EAAE;YACZI,QAAQ;QACV;QAEEjB,OAAeE,YAAY,GAAGM;QAChCU,IAAAA,iCAAsB,EAACpB;QACvBM,OAAOO,SAASQ,oBAAoB,CAAC,mBAAmBrB;IAC1D;AACF"}