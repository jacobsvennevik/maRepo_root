a2682e6479bd338e759469da796ae75d
/**
 * Enhanced Multi-Source Management Hook
 * 
 * Handles flashcards, files, and study materials selection
 * for wizard components. Extends the existing useFileManagement
 * pattern to support multiple source types.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    default: function() {
        return _default;
    },
    useMultiSourceManagement: function() {
        return useMultiSourceManagement;
    }
});
const _react = require("react");
const _axiosapi = require("../../../lib/axios-api");
const _projectApi = require("../../../lib/projectApi");
const _uploadutils = require("../../../features/projects/services/upload-utils");
// ============================================================================
// Default Values
// ============================================================================
const DEFAULT_SELECTED_SOURCES = {
    flashcards: {
        ids: [],
        groundOnly: false
    },
    files: {
        ids: [],
        groundOnly: false
    },
    studyMaterials: {
        ids: [],
        groundOnly: false
    }
};
const DEFAULT_SUPPORTED_TYPES = [
    'flashcards',
    'files',
    'studyMaterials'
];
const useMultiSourceManagement = ({ projectId, supportedTypes = DEFAULT_SUPPORTED_TYPES, onSourcesChange, autoLoad = true })=>{
    const [flashcards, setFlashcards] = (0, _react.useState)([]);
    const [files, setFiles] = (0, _react.useState)([]);
    const [studyMaterials, setStudyMaterials] = (0, _react.useState)([]);
    const [uploadedFiles, setUploadedFiles] = (0, _react.useState)([]);
    const [isLoadingFlashcards, setIsLoadingFlashcards] = (0, _react.useState)(false);
    const [isLoadingFiles, setIsLoadingFiles] = (0, _react.useState)(false);
    const [isLoadingStudyMaterials, setIsLoadingStudyMaterials] = (0, _react.useState)(false);
    const [selectedSources, setSelectedSourcesState] = (0, _react.useState)(DEFAULT_SELECTED_SOURCES);
    const [searchTerm, setSearchTerm] = (0, _react.useState)('');
    const loadFlashcards = (0, _react.useCallback)(async ()=>{
        if (!supportedTypes.includes('flashcards')) return;
        setIsLoadingFlashcards(true);
        try {
            const response = await (0, _projectApi.getProjectScoped)(`flashcard-decks/`, projectId, _axiosapi.axiosApi);
            const raw = response?.data ?? response ?? [];
            const flashcardData = (Array.isArray(raw) ? raw : raw?.results || []).map((deck)=>({
                    id: deck.id,
                    title: deck.title,
                    description: deck.description,
                    flashcard_count: deck.flashcard_count || 0,
                    created_at: deck.created_at,
                    updated_at: deck.updated_at,
                    type: 'flashcard'
                }));
            setFlashcards(flashcardData);
        } catch (error) {
            console.error('Failed to load flashcards:', error);
            if ((0, _uploadutils.isTestMode)() && (error?.code === 'ERR_NETWORK' || !error?.response)) {
                setFlashcards([]);
            } else {
                setFlashcards([]);
            }
        } finally{
            setIsLoadingFlashcards(false);
        }
    }, [
        projectId,
        supportedTypes
    ]);
    const loadFiles = (0, _react.useCallback)(async ()=>{
        if (!supportedTypes.includes('files')) return;
        setIsLoadingFiles(true);
        try {
            const response = await (0, _projectApi.getProjectScoped)(`files/`, projectId, _axiosapi.axiosApi);
            const raw = response?.data ?? response ?? [];
            const fileData = (Array.isArray(raw) ? raw : raw?.results || []).map((file)=>({
                    id: file.id,
                    name: file.name,
                    description: file.description,
                    size: file.file_size,
                    file_type: file.file_type,
                    created_at: file.created_at || file.uploaded_at,
                    type: 'file'
                }));
            setFiles(fileData);
        } catch (error) {
            console.error('Failed to load files:', error);
            if ((0, _uploadutils.isTestMode)() && (error?.code === 'ERR_NETWORK' || !error?.response)) {
                setFiles([]);
            } else {
                setFiles([]);
            }
        } finally{
            setIsLoadingFiles(false);
        }
    }, [
        projectId,
        supportedTypes
    ]);
    const loadStudyMaterials = (0, _react.useCallback)(async ()=>{
        if (!supportedTypes.includes('studyMaterials')) return;
        setIsLoadingStudyMaterials(true);
        try {
            const response = await (0, _projectApi.getProjectScoped)(`study-materials/`, projectId, _axiosapi.axiosApi);
            const raw = response?.data ?? response ?? [];
            const materialData = (Array.isArray(raw) ? raw : raw?.results || []).map((material)=>({
                    id: material.id,
                    title: material.title,
                    name: material.name,
                    description: material.description,
                    created_at: material.created_at,
                    updated_at: material.updated_at,
                    type: 'study_material'
                }));
            setStudyMaterials(materialData);
        } catch (error) {
            console.error('Failed to load study materials:', error);
            if ((0, _uploadutils.isTestMode)() && (error?.code === 'ERR_NETWORK' || !error?.response)) {
                setStudyMaterials([]);
            } else {
                setStudyMaterials([]);
            }
        } finally{
            setIsLoadingStudyMaterials(false);
        }
    }, [
        projectId,
        supportedTypes
    ]);
    const handleFileUpload = (0, _react.useCallback)(async (files)=>{
        setUploadedFiles((prev)=>[
                ...prev,
                ...files
            ]);
        try {
            for (const file of files){
                const formData = new FormData();
                formData.append('file', file);
                const response = await _axiosapi.axiosApi.post(`projects/${projectId}/upload_file/`, formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                });
                if (response.status === 200 || response.status === 201) {
                    console.log('✅ File uploaded successfully:', file.name);
                }
            }
            setTimeout(()=>{
                loadFiles();
            }, 1000);
        } catch (error) {
            console.error('❌ File upload failed:', error);
        }
    }, [
        projectId,
        loadFiles
    ]);
    const removeUploadedFile = (0, _react.useCallback)((index)=>{
        setUploadedFiles((prev)=>prev.filter((_, i)=>i !== index));
    }, []);
    const setSelectedSources = (0, _react.useCallback)((sources)=>{
        setSelectedSourcesState(sources);
        onSourcesChange?.(sources);
    }, [
        onSourcesChange
    ]);
    const clearSelection = (0, _react.useCallback)(()=>{
        setSelectedSources(DEFAULT_SELECTED_SOURCES);
        setUploadedFiles([]);
        setSearchTerm('');
    }, [
        setSelectedSources
    ]);
    const refreshSources = (0, _react.useCallback)(async ()=>{
        await Promise.all([
            loadFlashcards(),
            loadFiles(),
            loadStudyMaterials()
        ]);
    }, [
        loadFlashcards,
        loadFiles,
        loadStudyMaterials
    ]);
    (0, _react.useEffect)(()=>{
        if (autoLoad && projectId) {
            refreshSources();
        }
    }, [
        autoLoad,
        projectId,
        refreshSources
    ]);
    const totalSelectedCount = selectedSources.flashcards.ids.length + selectedSources.files.ids.length + selectedSources.studyMaterials.ids.length + uploadedFiles.length;
    const hasMinimumSelection = totalSelectedCount >= 1;
    const isAnyLoading = isLoadingFlashcards || isLoadingFiles || isLoadingStudyMaterials;
    return {
        flashcards,
        files,
        studyMaterials,
        uploadedFiles,
        isLoadingFlashcards,
        isLoadingFiles,
        isLoadingStudyMaterials,
        selectedSources,
        searchTerm,
        setSelectedSources,
        setSearchTerm,
        handleFileUpload,
        removeUploadedFile,
        refreshSources,
        clearSelection,
        totalSelectedCount,
        hasMinimumSelection,
        isAnyLoading
    };
};
const _default = useMultiSourceManagement;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYWNvYmhvcm5zdmVubmV2aWsvRG9jdW1lbnRzL0dpdEh1Yi9tYVJlcG9fcm9vdC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy93aXphcmQvc2hhcmVkL3VzZU11bHRpU291cmNlTWFuYWdlbWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuaGFuY2VkIE11bHRpLVNvdXJjZSBNYW5hZ2VtZW50IEhvb2tcbiAqIFxuICogSGFuZGxlcyBmbGFzaGNhcmRzLCBmaWxlcywgYW5kIHN0dWR5IG1hdGVyaWFscyBzZWxlY3Rpb25cbiAqIGZvciB3aXphcmQgY29tcG9uZW50cy4gRXh0ZW5kcyB0aGUgZXhpc3RpbmcgdXNlRmlsZU1hbmFnZW1lbnRcbiAqIHBhdHRlcm4gdG8gc3VwcG9ydCBtdWx0aXBsZSBzb3VyY2UgdHlwZXMuXG4gKi9cblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBheGlvc0FwaSB9IGZyb20gJ0AvbGliL2F4aW9zLWFwaSc7XG5pbXBvcnQgeyBnZXRQcm9qZWN0U2NvcGVkIH0gZnJvbSAnQC9saWIvcHJvamVjdEFwaSc7XG5pbXBvcnQgeyBpc1Rlc3RNb2RlIH0gZnJvbSAnQC9mZWF0dXJlcy9wcm9qZWN0cy9zZXJ2aWNlcy91cGxvYWQtdXRpbHMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUeXBlcyBhbmQgSW50ZXJmYWNlc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFNvdXJjZUl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHNpemU/OiBudW1iZXI7XG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ/OiBzdHJpbmc7XG4gIGZpbGVfdHlwZT86IHN0cmluZztcbiAgZmxhc2hjYXJkX2NvdW50PzogbnVtYmVyO1xuICB0eXBlOiAnZmxhc2hjYXJkJyB8ICdmaWxlJyB8ICdzdHVkeV9tYXRlcmlhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0ZWRTb3VyY2VzIHtcbiAgZmxhc2hjYXJkczogeyBpZHM6IHN0cmluZ1tdOyBncm91bmRPbmx5OiBib29sZWFuIH07XG4gIGZpbGVzOiB7IGlkczogc3RyaW5nW107IGdyb3VuZE9ubHk6IGJvb2xlYW4gfTtcbiAgc3R1ZHlNYXRlcmlhbHM6IHsgaWRzOiBzdHJpbmdbXTsgZ3JvdW5kT25seTogYm9vbGVhbiB9O1xufVxuXG5pbnRlcmZhY2UgVXNlTXVsdGlTb3VyY2VNYW5hZ2VtZW50T3B0aW9ucyB7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICBzdXBwb3J0ZWRUeXBlcz86IEFycmF5PCdmbGFzaGNhcmRzJyB8ICdmaWxlcycgfCAnc3R1ZHlNYXRlcmlhbHMnPjtcbiAgb25Tb3VyY2VzQ2hhbmdlPzogKHNvdXJjZXM6IFNlbGVjdGVkU291cmNlcykgPT4gdm9pZDtcbiAgYXV0b0xvYWQ/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgVXNlTXVsdGlTb3VyY2VNYW5hZ2VtZW50UmV0dXJuIHtcbiAgLy8gU291cmNlIGRhdGFcbiAgZmxhc2hjYXJkczogU291cmNlSXRlbVtdO1xuICBmaWxlczogU291cmNlSXRlbVtdO1xuICBzdHVkeU1hdGVyaWFsczogU291cmNlSXRlbVtdO1xuICBcbiAgLy8gVXBsb2FkIGhhbmRsaW5nXG4gIHVwbG9hZGVkRmlsZXM6IEZpbGVbXTtcbiAgXG4gIC8vIExvYWRpbmcgc3RhdGVzXG4gIGlzTG9hZGluZ0ZsYXNoY2FyZHM6IGJvb2xlYW47XG4gIGlzTG9hZGluZ0ZpbGVzOiBib29sZWFuO1xuICBpc0xvYWRpbmdTdHVkeU1hdGVyaWFsczogYm9vbGVhbjtcbiAgXG4gIC8vIFNlbGVjdGlvbiBzdGF0ZVxuICBzZWxlY3RlZFNvdXJjZXM6IFNlbGVjdGVkU291cmNlcztcbiAgXG4gIC8vIFNlYXJjaFxuICBzZWFyY2hUZXJtOiBzdHJpbmc7XG4gIFxuICAvLyBBY3Rpb25zXG4gIHNldFNlbGVjdGVkU291cmNlczogKHNvdXJjZXM6IFNlbGVjdGVkU291cmNlcykgPT4gdm9pZDtcbiAgc2V0U2VhcmNoVGVybTogKHRlcm06IHN0cmluZykgPT4gdm9pZDtcbiAgaGFuZGxlRmlsZVVwbG9hZDogKGZpbGVzOiBGaWxlW10pID0+IFByb21pc2U8dm9pZD47XG4gIHJlbW92ZVVwbG9hZGVkRmlsZTogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gIHJlZnJlc2hTb3VyY2VzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZDtcbiAgXG4gIC8vIENvbXB1dGVkIHZhbHVlc1xuICB0b3RhbFNlbGVjdGVkQ291bnQ6IG51bWJlcjtcbiAgaGFzTWluaW11bVNlbGVjdGlvbjogYm9vbGVhbjtcbiAgaXNBbnlMb2FkaW5nOiBib29sZWFuO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEZWZhdWx0IFZhbHVlc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBERUZBVUxUX1NFTEVDVEVEX1NPVVJDRVM6IFNlbGVjdGVkU291cmNlcyA9IHtcbiAgZmxhc2hjYXJkczogeyBpZHM6IFtdLCBncm91bmRPbmx5OiBmYWxzZSB9LFxuICBmaWxlczogeyBpZHM6IFtdLCBncm91bmRPbmx5OiBmYWxzZSB9LFxuICBzdHVkeU1hdGVyaWFsczogeyBpZHM6IFtdLCBncm91bmRPbmx5OiBmYWxzZSB9LFxufTtcblxuY29uc3QgREVGQVVMVF9TVVBQT1JURURfVFlQRVM6IEFycmF5PCdmbGFzaGNhcmRzJyB8ICdmaWxlcycgfCAnc3R1ZHlNYXRlcmlhbHMnPiA9IFsnZmxhc2hjYXJkcycsICdmaWxlcycsICdzdHVkeU1hdGVyaWFscyddXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhvb2sgSW1wbGVtZW50YXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHVzZU11bHRpU291cmNlTWFuYWdlbWVudCA9ICh7XG4gIHByb2plY3RJZCxcbiAgc3VwcG9ydGVkVHlwZXMgPSBERUZBVUxUX1NVUFBPUlRFRF9UWVBFUyxcbiAgb25Tb3VyY2VzQ2hhbmdlLFxuICBhdXRvTG9hZCA9IHRydWUsXG59OiBVc2VNdWx0aVNvdXJjZU1hbmFnZW1lbnRPcHRpb25zKTogVXNlTXVsdGlTb3VyY2VNYW5hZ2VtZW50UmV0dXJuID0+IHtcbiAgY29uc3QgW2ZsYXNoY2FyZHMsIHNldEZsYXNoY2FyZHNdID0gdXNlU3RhdGU8U291cmNlSXRlbVtdPihbXSk7XG4gIGNvbnN0IFtmaWxlcywgc2V0RmlsZXNdID0gdXNlU3RhdGU8U291cmNlSXRlbVtdPihbXSk7XG4gIGNvbnN0IFtzdHVkeU1hdGVyaWFscywgc2V0U3R1ZHlNYXRlcmlhbHNdID0gdXNlU3RhdGU8U291cmNlSXRlbVtdPihbXSk7XG4gIGNvbnN0IFt1cGxvYWRlZEZpbGVzLCBzZXRVcGxvYWRlZEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVbXT4oW10pO1xuICBcbiAgY29uc3QgW2lzTG9hZGluZ0ZsYXNoY2FyZHMsIHNldElzTG9hZGluZ0ZsYXNoY2FyZHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNMb2FkaW5nRmlsZXMsIHNldElzTG9hZGluZ0ZpbGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTG9hZGluZ1N0dWR5TWF0ZXJpYWxzLCBzZXRJc0xvYWRpbmdTdHVkeU1hdGVyaWFsc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCBbc2VsZWN0ZWRTb3VyY2VzLCBzZXRTZWxlY3RlZFNvdXJjZXNTdGF0ZV0gPSB1c2VTdGF0ZTxTZWxlY3RlZFNvdXJjZXM+KERFRkFVTFRfU0VMRUNURURfU09VUkNFUyk7XG4gIGNvbnN0IFtzZWFyY2hUZXJtLCBzZXRTZWFyY2hUZXJtXSA9IHVzZVN0YXRlKCcnKTtcblxuICBjb25zdCBsb2FkRmxhc2hjYXJkcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXN1cHBvcnRlZFR5cGVzLmluY2x1ZGVzKCdmbGFzaGNhcmRzJykpIHJldHVybjtcbiAgICBzZXRJc0xvYWRpbmdGbGFzaGNhcmRzKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZTogYW55ID0gYXdhaXQgZ2V0UHJvamVjdFNjb3BlZChgZmxhc2hjYXJkLWRlY2tzL2AsIHByb2plY3RJZCwgYXhpb3NBcGkgYXMgYW55KTtcbiAgICAgIGNvbnN0IHJhdyA9IHJlc3BvbnNlPy5kYXRhID8/IHJlc3BvbnNlID8/IFtdXG4gICAgICBjb25zdCBmbGFzaGNhcmREYXRhID0gKEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IHJhdz8ucmVzdWx0cyB8fCBbXSkubWFwKChkZWNrOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiBkZWNrLmlkLFxuICAgICAgICB0aXRsZTogZGVjay50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlY2suZGVzY3JpcHRpb24sXG4gICAgICAgIGZsYXNoY2FyZF9jb3VudDogZGVjay5mbGFzaGNhcmRfY291bnQgfHwgMCxcbiAgICAgICAgY3JlYXRlZF9hdDogZGVjay5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkX2F0OiBkZWNrLnVwZGF0ZWRfYXQsXG4gICAgICAgIHR5cGU6ICdmbGFzaGNhcmQnIGFzIGNvbnN0LFxuICAgICAgfSkpO1xuICAgICAgc2V0Rmxhc2hjYXJkcyhmbGFzaGNhcmREYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBmbGFzaGNhcmRzOicsIGVycm9yKTtcbiAgICAgIGlmIChpc1Rlc3RNb2RlKCkgJiYgKGVycm9yPy5jb2RlID09PSAnRVJSX05FVFdPUksnIHx8ICFlcnJvcj8ucmVzcG9uc2UpKSB7XG4gICAgICAgIHNldEZsYXNoY2FyZHMoW10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0Rmxhc2hjYXJkcyhbXSk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZ0ZsYXNoY2FyZHMoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3Byb2plY3RJZCwgc3VwcG9ydGVkVHlwZXNdKTtcbiAgXG4gIGNvbnN0IGxvYWRGaWxlcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXN1cHBvcnRlZFR5cGVzLmluY2x1ZGVzKCdmaWxlcycpKSByZXR1cm47XG4gICAgc2V0SXNMb2FkaW5nRmlsZXModHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCBnZXRQcm9qZWN0U2NvcGVkKGBmaWxlcy9gLCBwcm9qZWN0SWQsIGF4aW9zQXBpIGFzIGFueSk7XG4gICAgICBjb25zdCByYXcgPSByZXNwb25zZT8uZGF0YSA/PyByZXNwb25zZSA/PyBbXVxuICAgICAgY29uc3QgZmlsZURhdGEgPSAoQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogcmF3Py5yZXN1bHRzIHx8IFtdKS5tYXAoKGZpbGU6IGFueSkgPT4gKHtcbiAgICAgICAgaWQ6IGZpbGUuaWQsXG4gICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGZpbGUuZGVzY3JpcHRpb24sXG4gICAgICAgIHNpemU6IGZpbGUuZmlsZV9zaXplLFxuICAgICAgICBmaWxlX3R5cGU6IGZpbGUuZmlsZV90eXBlLFxuICAgICAgICBjcmVhdGVkX2F0OiBmaWxlLmNyZWF0ZWRfYXQgfHwgZmlsZS51cGxvYWRlZF9hdCxcbiAgICAgICAgdHlwZTogJ2ZpbGUnIGFzIGNvbnN0LFxuICAgICAgfSkpO1xuICAgICAgc2V0RmlsZXMoZmlsZURhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGZpbGVzOicsIGVycm9yKTtcbiAgICAgIGlmIChpc1Rlc3RNb2RlKCkgJiYgKGVycm9yPy5jb2RlID09PSAnRVJSX05FVFdPUksnIHx8ICFlcnJvcj8ucmVzcG9uc2UpKSB7XG4gICAgICAgIHNldEZpbGVzKFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEZpbGVzKFtdKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nRmlsZXMoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3Byb2plY3RJZCwgc3VwcG9ydGVkVHlwZXNdKTtcbiAgXG4gIGNvbnN0IGxvYWRTdHVkeU1hdGVyaWFscyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXN1cHBvcnRlZFR5cGVzLmluY2x1ZGVzKCdzdHVkeU1hdGVyaWFscycpKSByZXR1cm47XG4gICAgc2V0SXNMb2FkaW5nU3R1ZHlNYXRlcmlhbHModHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCBnZXRQcm9qZWN0U2NvcGVkKGBzdHVkeS1tYXRlcmlhbHMvYCwgcHJvamVjdElkLCBheGlvc0FwaSBhcyBhbnkpO1xuICAgICAgY29uc3QgcmF3ID0gcmVzcG9uc2U/LmRhdGEgPz8gcmVzcG9uc2UgPz8gW11cbiAgICAgIGNvbnN0IG1hdGVyaWFsRGF0YSA9IChBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiByYXc/LnJlc3VsdHMgfHwgW10pLm1hcCgobWF0ZXJpYWw6IGFueSkgPT4gKHtcbiAgICAgICAgaWQ6IG1hdGVyaWFsLmlkLFxuICAgICAgICB0aXRsZTogbWF0ZXJpYWwudGl0bGUsXG4gICAgICAgIG5hbWU6IG1hdGVyaWFsLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBtYXRlcmlhbC5kZXNjcmlwdGlvbixcbiAgICAgICAgY3JlYXRlZF9hdDogbWF0ZXJpYWwuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZF9hdDogbWF0ZXJpYWwudXBkYXRlZF9hdCxcbiAgICAgICAgdHlwZTogJ3N0dWR5X21hdGVyaWFsJyBhcyBjb25zdCxcbiAgICAgIH0pKTtcbiAgICAgIHNldFN0dWR5TWF0ZXJpYWxzKG1hdGVyaWFsRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgc3R1ZHkgbWF0ZXJpYWxzOicsIGVycm9yKTtcbiAgICAgIGlmIChpc1Rlc3RNb2RlKCkgJiYgKGVycm9yPy5jb2RlID09PSAnRVJSX05FVFdPUksnIHx8ICFlcnJvcj8ucmVzcG9uc2UpKSB7XG4gICAgICAgIHNldFN0dWR5TWF0ZXJpYWxzKFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFN0dWR5TWF0ZXJpYWxzKFtdKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nU3R1ZHlNYXRlcmlhbHMoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3Byb2plY3RJZCwgc3VwcG9ydGVkVHlwZXNdKTtcblxuICBjb25zdCBoYW5kbGVGaWxlVXBsb2FkID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbGVzOiBGaWxlW10pID0+IHtcbiAgICBzZXRVcGxvYWRlZEZpbGVzKHByZXYgPT4gWy4uLnByZXYsIC4uLmZpbGVzXSk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCAoYXhpb3NBcGkgYXMgYW55KS5wb3N0KGBwcm9qZWN0cy8ke3Byb2plY3RJZH0vdXBsb2FkX2ZpbGUvYCwgZm9ybURhdGEsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseTonLCBmaWxlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHsgbG9hZEZpbGVzKCk7IH0sIDEwMDApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmlsZSB1cGxvYWQgZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtwcm9qZWN0SWQsIGxvYWRGaWxlc10pO1xuXG4gIGNvbnN0IHJlbW92ZVVwbG9hZGVkRmlsZSA9IHVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgc2V0VXBsb2FkZWRGaWxlcyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2V0U2VsZWN0ZWRTb3VyY2VzID0gdXNlQ2FsbGJhY2soKHNvdXJjZXM6IFNlbGVjdGVkU291cmNlcykgPT4ge1xuICAgIHNldFNlbGVjdGVkU291cmNlc1N0YXRlKHNvdXJjZXMpO1xuICAgIG9uU291cmNlc0NoYW5nZT8uKHNvdXJjZXMpO1xuICB9LCBbb25Tb3VyY2VzQ2hhbmdlXSk7XG5cbiAgY29uc3QgY2xlYXJTZWxlY3Rpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRTb3VyY2VzKERFRkFVTFRfU0VMRUNURURfU09VUkNFUyk7XG4gICAgc2V0VXBsb2FkZWRGaWxlcyhbXSk7XG4gICAgc2V0U2VhcmNoVGVybSgnJyk7XG4gIH0sIFtzZXRTZWxlY3RlZFNvdXJjZXNdKTtcblxuICBjb25zdCByZWZyZXNoU291cmNlcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBsb2FkRmxhc2hjYXJkcygpLFxuICAgICAgbG9hZEZpbGVzKCksXG4gICAgICBsb2FkU3R1ZHlNYXRlcmlhbHMoKSxcbiAgICBdKTtcbiAgfSwgW2xvYWRGbGFzaGNhcmRzLCBsb2FkRmlsZXMsIGxvYWRTdHVkeU1hdGVyaWFsc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGF1dG9Mb2FkICYmIHByb2plY3RJZCkge1xuICAgICAgcmVmcmVzaFNvdXJjZXMoKTtcbiAgICB9XG4gIH0sIFthdXRvTG9hZCwgcHJvamVjdElkLCByZWZyZXNoU291cmNlc10pO1xuXG4gIGNvbnN0IHRvdGFsU2VsZWN0ZWRDb3VudCA9IFxuICAgIHNlbGVjdGVkU291cmNlcy5mbGFzaGNhcmRzLmlkcy5sZW5ndGggK1xuICAgIHNlbGVjdGVkU291cmNlcy5maWxlcy5pZHMubGVuZ3RoICtcbiAgICBzZWxlY3RlZFNvdXJjZXMuc3R1ZHlNYXRlcmlhbHMuaWRzLmxlbmd0aCArXG4gICAgdXBsb2FkZWRGaWxlcy5sZW5ndGg7XG4gIFxuICBjb25zdCBoYXNNaW5pbXVtU2VsZWN0aW9uID0gdG90YWxTZWxlY3RlZENvdW50ID49IDE7XG4gIGNvbnN0IGlzQW55TG9hZGluZyA9IGlzTG9hZGluZ0ZsYXNoY2FyZHMgfHwgaXNMb2FkaW5nRmlsZXMgfHwgaXNMb2FkaW5nU3R1ZHlNYXRlcmlhbHM7XG4gIFxuICByZXR1cm4ge1xuICAgIGZsYXNoY2FyZHMsXG4gICAgZmlsZXMsXG4gICAgc3R1ZHlNYXRlcmlhbHMsXG4gICAgdXBsb2FkZWRGaWxlcyxcbiAgICBpc0xvYWRpbmdGbGFzaGNhcmRzLFxuICAgIGlzTG9hZGluZ0ZpbGVzLFxuICAgIGlzTG9hZGluZ1N0dWR5TWF0ZXJpYWxzLFxuICAgIHNlbGVjdGVkU291cmNlcyxcbiAgICBzZWFyY2hUZXJtLFxuICAgIHNldFNlbGVjdGVkU291cmNlcyxcbiAgICBzZXRTZWFyY2hUZXJtLFxuICAgIGhhbmRsZUZpbGVVcGxvYWQsXG4gICAgcmVtb3ZlVXBsb2FkZWRGaWxlLFxuICAgIHJlZnJlc2hTb3VyY2VzLFxuICAgIGNsZWFyU2VsZWN0aW9uLFxuICAgIHRvdGFsU2VsZWN0ZWRDb3VudCxcbiAgICBoYXNNaW5pbXVtU2VsZWN0aW9uLFxuICAgIGlzQW55TG9hZGluZyxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZU11bHRpU291cmNlTWFuYWdlbWVudDtcbiJdLCJuYW1lcyI6WyJ1c2VNdWx0aVNvdXJjZU1hbmFnZW1lbnQiLCJERUZBVUxUX1NFTEVDVEVEX1NPVVJDRVMiLCJmbGFzaGNhcmRzIiwiaWRzIiwiZ3JvdW5kT25seSIsImZpbGVzIiwic3R1ZHlNYXRlcmlhbHMiLCJERUZBVUxUX1NVUFBPUlRFRF9UWVBFUyIsInByb2plY3RJZCIsInN1cHBvcnRlZFR5cGVzIiwib25Tb3VyY2VzQ2hhbmdlIiwiYXV0b0xvYWQiLCJzZXRGbGFzaGNhcmRzIiwidXNlU3RhdGUiLCJzZXRGaWxlcyIsInNldFN0dWR5TWF0ZXJpYWxzIiwidXBsb2FkZWRGaWxlcyIsInNldFVwbG9hZGVkRmlsZXMiLCJpc0xvYWRpbmdGbGFzaGNhcmRzIiwic2V0SXNMb2FkaW5nRmxhc2hjYXJkcyIsImlzTG9hZGluZ0ZpbGVzIiwic2V0SXNMb2FkaW5nRmlsZXMiLCJpc0xvYWRpbmdTdHVkeU1hdGVyaWFscyIsInNldElzTG9hZGluZ1N0dWR5TWF0ZXJpYWxzIiwic2VsZWN0ZWRTb3VyY2VzIiwic2V0U2VsZWN0ZWRTb3VyY2VzU3RhdGUiLCJzZWFyY2hUZXJtIiwic2V0U2VhcmNoVGVybSIsImxvYWRGbGFzaGNhcmRzIiwidXNlQ2FsbGJhY2siLCJpbmNsdWRlcyIsInJlc3BvbnNlIiwiZ2V0UHJvamVjdFNjb3BlZCIsImF4aW9zQXBpIiwicmF3IiwiZGF0YSIsImZsYXNoY2FyZERhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJyZXN1bHRzIiwibWFwIiwiZGVjayIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImZsYXNoY2FyZF9jb3VudCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwidHlwZSIsImVycm9yIiwiY29uc29sZSIsImlzVGVzdE1vZGUiLCJjb2RlIiwibG9hZEZpbGVzIiwiZmlsZURhdGEiLCJmaWxlIiwibmFtZSIsInNpemUiLCJmaWxlX3NpemUiLCJmaWxlX3R5cGUiLCJ1cGxvYWRlZF9hdCIsImxvYWRTdHVkeU1hdGVyaWFscyIsIm1hdGVyaWFsRGF0YSIsIm1hdGVyaWFsIiwiaGFuZGxlRmlsZVVwbG9hZCIsInByZXYiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicG9zdCIsImhlYWRlcnMiLCJzdGF0dXMiLCJsb2ciLCJzZXRUaW1lb3V0IiwicmVtb3ZlVXBsb2FkZWRGaWxlIiwiaW5kZXgiLCJmaWx0ZXIiLCJfIiwiaSIsInNldFNlbGVjdGVkU291cmNlcyIsInNvdXJjZXMiLCJjbGVhclNlbGVjdGlvbiIsInJlZnJlc2hTb3VyY2VzIiwiUHJvbWlzZSIsImFsbCIsInVzZUVmZmVjdCIsInRvdGFsU2VsZWN0ZWRDb3VudCIsImxlbmd0aCIsImhhc01pbmltdW1TZWxlY3Rpb24iLCJpc0FueUxvYWRpbmciXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Q0FNQzs7Ozs7Ozs7Ozs7SUE0UUQsT0FBd0M7ZUFBeEM7O0lBckxhQSx3QkFBd0I7ZUFBeEJBOzs7dUJB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