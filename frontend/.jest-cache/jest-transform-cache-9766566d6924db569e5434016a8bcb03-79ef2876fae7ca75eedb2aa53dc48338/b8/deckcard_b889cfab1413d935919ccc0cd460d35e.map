{"version":3,"sources":["/Users/jacobhornsvennevik/Documents/GitHub/maRepo_root/frontend/src/features/flashcards/components/deck-card.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  BookOpen,\n  Calendar,\n  Clock,\n  Edit3,\n  MoreHorizontal,\n  Play,\n  Share2,\n  Star,\n  Trash2,\n  ChevronRight,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { FlashcardSet } from '@/features/flashcards/types';\nimport { getDeckColor, formatDate, formatRelativeDate, getDueCardsColor } from './utils';\nimport type { DeckActionHandlers } from './types';\n\nexport interface DeckCardProps extends DeckActionHandlers {\n  deck: FlashcardSet;\n  variant?: 'default' | 'compact';\n  layout?: 'grid' | 'list';\n  projectId?: string;\n  className?: string;\n}\n\nexport function DeckCard({\n  deck,\n  variant = 'default',\n  layout = 'grid',\n  projectId,\n  onEdit,\n  onDelete,\n  onShare,\n  onToggleFavorite,\n  className,\n}: DeckCardProps) {\n  const isCompact = variant === 'compact';\n  const isListLayout = layout === 'list';\n\n  const handleQuickAction = (action: string) => {\n    switch (action) {\n      case 'edit':\n        onEdit?.(deck);\n        break;\n      case 'delete':\n        onDelete?.(deck);\n        break;\n      case 'share':\n        onShare?.(deck);\n        break;\n      case 'favorite':\n        onToggleFavorite?.(deck);\n        break;\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      // Navigate to project-scoped deck carousel page\n      const targetProjectId = projectId || deck.owner;\n      window.location.href = `/projects/${targetProjectId}/flashcards/${deck.id}`;\n    }\n  };\n\n  if (isListLayout) {\n    return (\n      <Card\n        className={cn(\n          'group hover:shadow-md transition-all duration-200',\n          'border-l-4 border-l-primary/20 hover:border-l-primary',\n          className\n        )}\n        tabIndex={0}\n        role=\"button\"\n        aria-label={`Study deck: ${deck.title}. ${deck.study_stats?.total_cards || 0} cards, ${deck.study_stats?.due_cards || 0} due today`}\n        onKeyDown={handleKeyDown}\n      >\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            {/* Left side - Main content */}\n            <div className=\"flex items-center space-x-4 flex-1 min-w-0\">\n              {/* Icon */}\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                  <BookOpen className=\"h-5 w-5 text-white\" />\n                </div>\n              </div>\n\n              {/* Content */}\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center space-x-2 mb-1\">\n                  <h3 className=\"font-semibold text-gray-900 truncate\">\n                    {deck.title}\n                  </h3>\n                  {deck.tags?.includes('favorite') && (\n                    <Star className=\"h-4 w-4 text-yellow-500 fill-current\" />\n                  )}\n                </div>\n                \n                {deck.description && (\n                  <p className=\"text-sm text-gray-600 line-clamp-1 mb-2\">\n                    {deck.description}\n                  </p>\n                )}\n\n                <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                  <div className=\"flex items-center space-x-1\">\n                    <BookOpen className=\"h-3 w-3\" />\n                    <span>{deck.study_stats?.total_cards || 0} cards</span>\n                  </div>\n                  \n                  {deck.study_stats?.due_cards > 0 && (\n                    <div className={cn('flex items-center space-x-1', getDueCardsColor(deck.study_stats.due_cards))}>\n                      <Clock className=\"h-3 w-3\" />\n                      <span>{deck.study_stats.due_cards} due</span>\n                    </div>\n                  )}\n\n                  {deck.study_stats?.next_review && (\n                    <div className=\"flex items-center space-x-1\">\n                      <Calendar className=\"h-3 w-3\" />\n                      <span>Last: {formatRelativeDate(deck.study_stats.next_review)}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Right side - Actions */}\n            <div className=\"flex items-center space-x-2\">\n              <Button\n                asChild\n                size=\"sm\"\n                className=\"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700\"\n              >\n                <Link href={`/projects/${projectId || deck.owner}/flashcards/${deck.id}`}>\n                  <Play className=\"h-3 w-3 mr-1\" />\n                  Study\n                </Link>\n              </Button>\n\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\" \n                    className=\"h-8 w-8 p-0\"\n                    aria-label={`More actions for ${deck.title}`}\n                  >\n                    <MoreHorizontal className=\"h-4 w-4\" />\n                    <span className=\"sr-only\">Open menu</span>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-48\">\n                  <DropdownMenuItem onClick={() => handleQuickAction('edit')}>\n                    <Edit3 className=\"h-4 w-4 mr-2\" />\n                    Edit Deck\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => handleQuickAction('share')}>\n                    <Share2 className=\"h-4 w-4 mr-2\" />\n                    Share Deck\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => handleQuickAction('favorite')}>\n                    <Star className=\"h-4 w-4 mr-2\" />\n                    {deck.tags?.includes('favorite') ? 'Remove from Favorites' : 'Add to Favorites'}\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem \n                    onClick={() => handleQuickAction('delete')}\n                    className=\"text-red-600 focus:text-red-600\"\n                  >\n                    <Trash2 className=\"h-4 w-4 mr-2\" />\n                    Delete Deck\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Grid layout (default) - Simplified design matching the picture\n  return (\n    <Card\n      className={cn(\n        'group hover:shadow-md transition-all duration-200',\n        'bg-white border border-gray-200',\n        className\n      )}\n      tabIndex={0}\n      role=\"button\"\n      aria-label={`Study deck: ${deck.title}. ${deck.study_stats?.total_cards || 0} cards, ${deck.study_stats?.due_cards || 0} due today`}\n      onKeyDown={handleKeyDown}\n    >\n      <CardContent className=\"p-8\">\n        {/* Top section with icon and actions */}\n        <div className=\"flex items-start justify-between mb-6\">\n          {/* Icon */}\n          <div className={cn(\"w-16 h-16 rounded-lg bg-gradient-to-br flex items-center justify-center shadow-sm\", getDeckColor(deck.id, 'icon'))}>\n            <BookOpen className=\"h-8 w-8 text-white\" />\n          </div>\n\n          {/* Action buttons */}\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-10 w-10 p-0 hover:bg-gray-100\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleQuickAction('edit');\n              }}\n              aria-label={`Edit ${deck.title}`}\n            >\n              <Edit3 className=\"h-5 w-5 text-gray-700\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-10 w-10 p-0 hover:bg-gray-100\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleQuickAction('delete');\n              }}\n              aria-label={`Delete ${deck.title}`}\n            >\n              <Trash2 className=\"h-5 w-5 text-red-500\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Title */}\n        <h3 className=\"font-bold text-gray-900 text-2xl mb-3\">\n          {deck.title}\n        </h3>\n\n        {/* Description */}\n        {deck.description && (\n          <p className=\"text-gray-600 text-base mb-6 line-clamp-2\">\n            {deck.description}\n          </p>\n        )}\n\n        {/* Bottom section with card count and date */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <Badge variant=\"secondary\" className=\"text-sm bg-gray-100 text-gray-700 px-3 py-1\">\n            {deck.study_stats?.total_cards || 0} cards\n          </Badge>\n          <span className=\"text-sm text-gray-500\">\n            {formatDate(deck.updated_at)}\n          </span>\n        </div>\n\n        {/* CTA Button */}\n        <Button\n          asChild\n          className={cn(\"w-full bg-gradient-to-r text-white font-medium rounded-lg py-3 text-base\", getDeckColor(deck.id, 'button'))}\n        >\n          <Link href={`/projects/${projectId || deck.owner}/flashcards/${deck.id}`}>\n            Study Deck\n            <ChevronRight className=\"h-5 w-5 ml-2\" />\n          </Link>\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":["DeckCard","deck","variant","layout","projectId","onEdit","onDelete","onShare","onToggleFavorite","className","isCompact","isListLayout","handleQuickAction","action","handleKeyDown","event","key","preventDefault","targetProjectId","owner","window","location","href","id","Card","cn","tabIndex","role","aria-label","title","study_stats","total_cards","due_cards","onKeyDown","CardContent","div","BookOpen","h3","tags","includes","Star","description","p","span","getDueCardsColor","Clock","next_review","Calendar","formatRelativeDate","Button","asChild","size","Link","Play","DropdownMenu","DropdownMenuTrigger","MoreHorizontal","DropdownMenuContent","align","DropdownMenuItem","onClick","Edit3","Share2","DropdownMenuSeparator","Trash2","getDeckColor","e","stopPropagation","Badge","formatDate","updated_at","ChevronRight"],"mappings":"AAAA;;;;;+BAuCgBA;;;eAAAA;;;;8DArCE;6DACD;sBACiB;wBACX;uBACD;8BAOf;6BAYA;uBACY;wBAE4D;;;;;;AAWxE,SAASA,SAAS,EACvBC,IAAI,EACJC,UAAU,SAAS,EACnBC,SAAS,MAAM,EACfC,SAAS,EACTC,MAAM,EACNC,QAAQ,EACRC,OAAO,EACPC,gBAAgB,EAChBC,SAAS,EACK;IACd,MAAMC,YAAYR,YAAY;IAC9B,MAAMS,eAAeR,WAAW;IAEhC,MAAMS,oBAAoB,CAACC;QACzB,OAAQA;YACN,KAAK;gBACHR,SAASJ;gBACT;YACF,KAAK;gBACHK,WAAWL;gBACX;YACF,KAAK;gBACHM,UAAUN;gBACV;YACF,KAAK;gBACHO,mBAAmBP;gBACnB;QACJ;IACF;IAEA,MAAMa,gBAAgB,CAACC;QACrB,IAAIA,MAAMC,GAAG,KAAK,WAAWD,MAAMC,GAAG,KAAK,KAAK;YAC9CD,MAAME,cAAc;YACpB,gDAAgD;YAChD,MAAMC,kBAAkBd,aAAaH,KAAKkB,KAAK;YAC/CC,OAAOC,QAAQ,CAACC,IAAI,GAAG,CAAC,UAAU,EAAEJ,gBAAgB,YAAY,EAAEjB,KAAKsB,EAAE,EAAE;QAC7E;IACF;IAEA,IAAIZ,cAAc;QAChB,qBACE,qBAACa,UAAI;YACHf,WAAWgB,IAAAA,SAAE,EACX,qDACA,yDACAhB;YAEFiB,UAAU;YACVC,MAAK;YACLC,cAAY,CAAC,YAAY,EAAE3B,KAAK4B,KAAK,CAAC,EAAE,EAAE5B,KAAK6B,WAAW,EAAEC,eAAe,EAAE,QAAQ,EAAE9B,KAAK6B,WAAW,EAAEE,aAAa,EAAE,UAAU,CAAC;YACnIC,WAAWnB;sBAEX,cAAA,qBAACoB,iBAAW;gBAACzB,WAAU;0BACrB,cAAA,sBAAC0B;oBAAI1B,WAAU;;sCAEb,sBAAC0B;4BAAI1B,WAAU;;8CAEb,qBAAC0B;oCAAI1B,WAAU;8CACb,cAAA,qBAAC0B;wCAAI1B,WAAU;kDACb,cAAA,qBAAC2B,qBAAQ;4CAAC3B,WAAU;;;;8CAKxB,sBAAC0B;oCAAI1B,WAAU;;sDACb,sBAAC0B;4CAAI1B,WAAU;;8DACb,qBAAC4B;oDAAG5B,WAAU;8DACXR,KAAK4B,KAAK;;gDAEZ5B,KAAKqC,IAAI,EAAEC,SAAS,6BACnB,qBAACC,iBAAI;oDAAC/B,WAAU;;;;wCAInBR,KAAKwC,WAAW,kBACf,qBAACC;4CAAEjC,WAAU;sDACVR,KAAKwC,WAAW;;sDAIrB,sBAACN;4CAAI1B,WAAU;;8DACb,sBAAC0B;oDAAI1B,WAAU;;sEACb,qBAAC2B,qBAAQ;4DAAC3B,WAAU;;sEACpB,sBAACkC;;gEAAM1C,KAAK6B,WAAW,EAAEC,eAAe;gEAAE;;;;;gDAG3C9B,KAAK6B,WAAW,EAAEE,YAAY,mBAC7B,sBAACG;oDAAI1B,WAAWgB,IAAAA,SAAE,EAAC,+BAA+BmB,IAAAA,wBAAgB,EAAC3C,KAAK6B,WAAW,CAACE,SAAS;;sEAC3F,qBAACa,kBAAK;4DAACpC,WAAU;;sEACjB,sBAACkC;;gEAAM1C,KAAK6B,WAAW,CAACE,SAAS;gEAAC;;;;;gDAIrC/B,KAAK6B,WAAW,EAAEgB,6BACjB,sBAACX;oDAAI1B,WAAU;;sEACb,qBAACsC,qBAAQ;4DAACtC,WAAU;;sEACpB,sBAACkC;;gEAAK;gEAAOK,IAAAA,0BAAkB,EAAC/C,KAAK6B,WAAW,CAACgB,WAAW;;;;;;;;;;;sCAQtE,sBAACX;4BAAI1B,WAAU;;8CACb,qBAACwC,cAAM;oCACLC,OAAO;oCACPC,MAAK;oCACL1C,WAAU;8CAEV,cAAA,sBAAC2C,aAAI;wCAAC9B,MAAM,CAAC,UAAU,EAAElB,aAAaH,KAAKkB,KAAK,CAAC,YAAY,EAAElB,KAAKsB,EAAE,EAAE;;0DACtE,qBAAC8B,iBAAI;gDAAC5C,WAAU;;4CAAiB;;;;8CAKrC,sBAAC6C,0BAAY;;sDACX,qBAACC,iCAAmB;4CAACL,OAAO;sDAC1B,cAAA,sBAACD,cAAM;gDACL/C,SAAQ;gDACRiD,MAAK;gDACL1C,WAAU;gDACVmB,cAAY,CAAC,iBAAiB,EAAE3B,KAAK4B,KAAK,EAAE;;kEAE5C,qBAAC2B,2BAAc;wDAAC/C,WAAU;;kEAC1B,qBAACkC;wDAAKlC,WAAU;kEAAU;;;;;sDAG9B,sBAACgD,iCAAmB;4CAACC,OAAM;4CAAMjD,WAAU;;8DACzC,sBAACkD,8BAAgB;oDAACC,SAAS,IAAMhD,kBAAkB;;sEACjD,qBAACiD,kBAAK;4DAACpD,WAAU;;wDAAiB;;;8DAGpC,sBAACkD,8BAAgB;oDAACC,SAAS,IAAMhD,kBAAkB;;sEACjD,qBAACkD,mBAAM;4DAACrD,WAAU;;wDAAiB;;;8DAGrC,sBAACkD,8BAAgB;oDAACC,SAAS,IAAMhD,kBAAkB;;sEACjD,qBAAC4B,iBAAI;4DAAC/B,WAAU;;wDACfR,KAAKqC,IAAI,EAAEC,SAAS,cAAc,0BAA0B;;;8DAE/D,qBAACwB,mCAAqB;8DACtB,sBAACJ,8BAAgB;oDACfC,SAAS,IAAMhD,kBAAkB;oDACjCH,WAAU;;sEAEV,qBAACuD,mBAAM;4DAACvD,WAAU;;wDAAiB;;;;;;;;;;;;;IAUrD;IAEA,iEAAiE;IACjE,qBACE,qBAACe,UAAI;QACHf,WAAWgB,IAAAA,SAAE,EACX,qDACA,mCACAhB;QAEFiB,UAAU;QACVC,MAAK;QACLC,cAAY,CAAC,YAAY,EAAE3B,KAAK4B,KAAK,CAAC,EAAE,EAAE5B,KAAK6B,WAAW,EAAEC,eAAe,EAAE,QAAQ,EAAE9B,KAAK6B,WAAW,EAAEE,aAAa,EAAE,UAAU,CAAC;QACnIC,WAAWnB;kBAEX,cAAA,sBAACoB,iBAAW;YAACzB,WAAU;;8BAErB,sBAAC0B;oBAAI1B,WAAU;;sCAEb,qBAAC0B;4BAAI1B,WAAWgB,IAAAA,SAAE,EAAC,qFAAqFwC,IAAAA,oBAAY,EAAChE,KAAKsB,EAAE,EAAE;sCAC5H,cAAA,qBAACa,qBAAQ;gCAAC3B,WAAU;;;sCAItB,sBAAC0B;4BAAI1B,WAAU;;8CACb,qBAACwC,cAAM;oCACL/C,SAAQ;oCACRiD,MAAK;oCACL1C,WAAU;oCACVmD,SAAS,CAACM;wCACRA,EAAEC,eAAe;wCACjBvD,kBAAkB;oCACpB;oCACAgB,cAAY,CAAC,KAAK,EAAE3B,KAAK4B,KAAK,EAAE;8CAEhC,cAAA,qBAACgC,kBAAK;wCAACpD,WAAU;;;8CAEnB,qBAACwC,cAAM;oCACL/C,SAAQ;oCACRiD,MAAK;oCACL1C,WAAU;oCACVmD,SAAS,CAACM;wCACRA,EAAEC,eAAe;wCACjBvD,kBAAkB;oCACpB;oCACAgB,cAAY,CAAC,OAAO,EAAE3B,KAAK4B,KAAK,EAAE;8CAElC,cAAA,qBAACmC,mBAAM;wCAACvD,WAAU;;;;;;;8BAMxB,qBAAC4B;oBAAG5B,WAAU;8BACXR,KAAK4B,KAAK;;gBAIZ5B,KAAKwC,WAAW,kBACf,qBAACC;oBAAEjC,WAAU;8BACVR,KAAKwC,WAAW;;8BAKrB,sBAACN;oBAAI1B,WAAU;;sCACb,sBAAC2D,YAAK;4BAAClE,SAAQ;4BAAYO,WAAU;;gCAClCR,KAAK6B,WAAW,EAAEC,eAAe;gCAAE;;;sCAEtC,qBAACY;4BAAKlC,WAAU;sCACb4D,IAAAA,kBAAU,EAACpE,KAAKqE,UAAU;;;;8BAK/B,qBAACrB,cAAM;oBACLC,OAAO;oBACPzC,WAAWgB,IAAAA,SAAE,EAAC,4EAA4EwC,IAAAA,oBAAY,EAAChE,KAAKsB,EAAE,EAAE;8BAEhH,cAAA,sBAAC6B,aAAI;wBAAC9B,MAAM,CAAC,UAAU,EAAElB,aAAaH,KAAKkB,KAAK,CAAC,YAAY,EAAElB,KAAKsB,EAAE,EAAE;;4BAAE;0CAExE,qBAACgD,yBAAY;gCAAC9D,WAAU;;;;;;;;AAMpC"}