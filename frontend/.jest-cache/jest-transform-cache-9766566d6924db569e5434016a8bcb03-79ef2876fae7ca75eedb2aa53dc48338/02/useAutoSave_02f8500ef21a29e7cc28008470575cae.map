{"version":3,"sources":["/Users/jacobhornsvennevik/Documents/GitHub/maRepo_root/frontend/src/features/projects/hooks/useAutoSave.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback } from \"react\";\n\ninterface UseAutoSaveOptions<T> {\n  data: T;\n  key: string;\n  enabled?: boolean;\n  debounceMs?: number;\n}\n\nexport function useAutoSave<T>({\n  data,\n  key,\n  enabled = true,\n  debounceMs = 1000,\n}: UseAutoSaveOptions<T>) {\n  const saveToStorage = useCallback(\n    (dataToSave: T) => {\n      try {\n        localStorage.setItem(\n          `project-setup-${key}`,\n          JSON.stringify({\n            data: dataToSave,\n            timestamp: Date.now(),\n          }),\n        );\n      } catch (error) {\n        console.warn(\"Failed to save to localStorage:\", error);\n      }\n    },\n    [key],\n  );\n\n  const loadFromStorage = useCallback((): T | null => {\n    try {\n      const saved = localStorage.getItem(`project-setup-${key}`);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        // Check if data is less than 24 hours old\n        if (Date.now() - parsed.timestamp < 24 * 60 * 60 * 1000) {\n          return parsed.data;\n        }\n      }\n    } catch (error) {\n      console.warn(\"Failed to load from localStorage:\", error);\n    }\n    return null;\n  }, [key]);\n\n  const clearStorage = useCallback(() => {\n    try {\n      localStorage.removeItem(`project-setup-${key}`);\n    } catch (error) {\n      console.warn(\"Failed to clear localStorage:\", error);\n    }\n  }, [key]);\n\n  // Auto-save effect\n  useEffect(() => {\n    if (!enabled) return;\n\n    const timeoutId = setTimeout(() => {\n      saveToStorage(data);\n    }, debounceMs);\n\n    return () => clearTimeout(timeoutId);\n  }, [data, enabled, debounceMs, saveToStorage]);\n\n  return {\n    saveToStorage,\n    loadFromStorage,\n    clearStorage,\n  };\n}\n"],"names":["useAutoSave","data","key","enabled","debounceMs","saveToStorage","useCallback","dataToSave","localStorage","setItem","JSON","stringify","timestamp","Date","now","error","console","warn","loadFromStorage","saved","getItem","parsed","parse","clearStorage","removeItem","useEffect","timeoutId","setTimeout","clearTimeout"],"mappings":"AAAA;;;;;+BAWgBA;;;eAAAA;;;uBATuB;AAShC,SAASA,YAAe,EAC7BC,IAAI,EACJC,GAAG,EACHC,UAAU,IAAI,EACdC,aAAa,IAAI,EACK;IACtB,MAAMC,gBAAgBC,IAAAA,kBAAW,EAC/B,CAACC;QACC,IAAI;YACFC,aAAaC,OAAO,CAClB,CAAC,cAAc,EAAEP,KAAK,EACtBQ,KAAKC,SAAS,CAAC;gBACbV,MAAMM;gBACNK,WAAWC,KAAKC,GAAG;YACrB;QAEJ,EAAE,OAAOC,OAAO;YACdC,QAAQC,IAAI,CAAC,mCAAmCF;QAClD;IACF,GACA;QAACb;KAAI;IAGP,MAAMgB,kBAAkBZ,IAAAA,kBAAW,EAAC;QAClC,IAAI;YACF,MAAMa,QAAQX,aAAaY,OAAO,CAAC,CAAC,cAAc,EAAElB,KAAK;YACzD,IAAIiB,OAAO;gBACT,MAAME,SAASX,KAAKY,KAAK,CAACH;gBAC1B,0CAA0C;gBAC1C,IAAIN,KAAKC,GAAG,KAAKO,OAAOT,SAAS,GAAG,KAAK,KAAK,KAAK,MAAM;oBACvD,OAAOS,OAAOpB,IAAI;gBACpB;YACF;QACF,EAAE,OAAOc,OAAO;YACdC,QAAQC,IAAI,CAAC,qCAAqCF;QACpD;QACA,OAAO;IACT,GAAG;QAACb;KAAI;IAER,MAAMqB,eAAejB,IAAAA,kBAAW,EAAC;QAC/B,IAAI;YACFE,aAAagB,UAAU,CAAC,CAAC,cAAc,EAAEtB,KAAK;QAChD,EAAE,OAAOa,OAAO;YACdC,QAAQC,IAAI,CAAC,iCAAiCF;QAChD;IACF,GAAG;QAACb;KAAI;IAER,mBAAmB;IACnBuB,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACtB,SAAS;QAEd,MAAMuB,YAAYC,WAAW;YAC3BtB,cAAcJ;QAChB,GAAGG;QAEH,OAAO,IAAMwB,aAAaF;IAC5B,GAAG;QAACzB;QAAME;QAASC;QAAYC;KAAc;IAE7C,OAAO;QACLA;QACAa;QACAK;IACF;AACF"}